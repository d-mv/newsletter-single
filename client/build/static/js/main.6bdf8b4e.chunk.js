(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,o){e.exports={createForm:"SourceCreate_createForm__ip7VY",openForm:"SourceCreate_openForm__LzWuh",labelTitle:"SourceCreate_labelTitle__1cXrb",center:"SourceCreate_center__2kQsx"}},function(e,t,o){e.exports={body:"PostShow_body__2TwRe",statusLine:"PostShow_statusLine__2IdMQ",secondLine:"PostShow_secondLine__2UdMm",sourceAuthorWrapper:"PostShow_sourceAuthorWrapper__wmORu",author:"PostShow_author__2zb90",buttonsWrapper:"PostShow_buttonsWrapper__3rLlP",text:"PostShow_text__1LUHk",signature:"PostShow_signature__2kcrB","book-cta":"PostShow_book-cta__1Zi7g","border-bottom":"PostShow_border-bottom__2BsMA"}},,,function(e,t,o){e.exports={sectionWrapper:"SourceCard_sectionWrapper__cLh38",section:"SourceCard_section__1GsAX",nameWrapper:"SourceCard_nameWrapper__2qkrb",name:"SourceCard_name__3dZ2_",url:"SourceCard_url__3DiHr",buttonsWrapper:"SourceCard_buttonsWrapper__2bEZR"}},,function(e,t,o){e.exports={button:"PostButton_button__1dQxV",delete:"PostButton_delete__EgzSD",on:"PostButton_on__JhT8o",read:"PostButton_read__3_P90",unRead:"PostButton_unRead__2fZJa"}},function(e,t,o){e.exports={body:"PostCard_body__1dWen",text:"PostCard_text__LS6Tr",bodyRead:"PostCard_bodyRead__2-ozQ",secondLine:"PostCard_secondLine__8KX_q",statsLine:"PostCard_statsLine__3e0dV"}},function(e,t,o){e.exports={smartMenu:"SmartMenu_smartMenu__3NTZc",text:"SmartMenu_text__3yKic",refresh:"SmartMenu_refresh__WfKir"}},,,function(e,t,o){e.exports={newsletterHead:"TitleBar_newsletterHead__O-_qt",title:"TitleBar_title__3YLqa",timeStamp:"TitleBar_timeStamp__3J601"}},function(e,t,o){e.exports={element:"NavMenuElement_element__df_g8",button:"NavMenuElement_button__2gpJC",buttonArrow:"NavMenuElement_buttonArrow__3lPn9",buttonArrowOpen:"NavMenuElement_buttonArrowOpen__gmt7u"}},function(e,t,o){e.exports={button:"SourceButton_button__1TMyL",buttonDims:"SourceButton_buttonDims__2J6RB",addSource:"SourceButton_addSource__Q5b6a",refreshSource:"SourceButton_refreshSource__3zNOa"}},function(e,t,o){e.exports={section:"SourcesList_section__2QZ_A",message:"SourcesList_message__1ujgw",buttonsWrapper:"SourcesList_buttonsWrapper__zvfx3"}},,,,function(e,t,o){e.exports={menu:"NavMenu_menu__3DpfU",menuOpen:"NavMenu_menuOpen__3P4RL"}},function(e,t,o){e.exports={title:"PostTitle_title__3Rtbu",postTitle:"PostTitle_postTitle__1exmo",postTitleShow:"PostTitle_postTitleShow__YJbat"}},,function(e,t,o){e.exports={sourceFormat:"Source_sourceFormat__3I71m",source:"Source_source__39_G7",sourceShow:"Source_sourceShow__2Gc-e"}},function(e,t,o){e.exports={divider:"Divider_divider__1AOMc",dividerCard:"Divider_dividerCard__qxBqq"}},function(e,t,o){e.exports={contentDisplay:"ContentDisplay_contentDisplay__1I9CB",actionMessage:"ContentDisplay_actionMessage__28yXc",appear:"ContentDisplay_appear__1zQ0p"}},,,,,,,function(e,t,o){e.exports={content:"PostCardList_content__2V28v",flex:"PostCardList_flex__3-SqG"}},function(e,t,o){e.exports=o(54)},,,,,,,,,,,,,function(e,t,o){},function(e,t,o){"use strict";o.r(t);var a=o(1),n=o.n(a),s=o(34),r=o.n(s),c=o(19),i=o(8),u=o(36),l=o(37),p=o.n(l),d=o(38),h=o.n(d),m=o(2),f=o(6),_=o(4),S=o(3),b=o(5),v={1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},g={1:"Sun",2:"Mon",3:"Tue",4:"Wed",5:"Thu",6:"Fri",7:"Sat"},E=function(e){function t(){return Object(m.a)(this,t),Object(_.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=new Date;this.props.timestamp&&(e=new Date(this.props.timestamp));var t=e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes(),o=e.getHours()>12?e.getHours()-12:e.getHours(),a="".concat(o,":").concat(t);a=e.getHours()>11?"".concat(a," pm"):"".concat(a," am");var s="".concat(g[e.getDay()+1]," ").concat(e.getDate()," ").concat(v[e.getMonth()+1]," at ").concat(a);return this.props.pre&&(s="".concat(this.props.pre," ").concat(s)),n.a.createElement("div",null,s)}}]),t}(n.a.Component),w=o(20),y=o.n(w),O=function(e){function t(){return Object(m.a)(this,t),Object(_.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return n.a.createElement("header",{className:y.a.newsletterHead},n.a.createElement("div",{className:y.a.title},"The Newsletter"),n.a.createElement("time",{className:y.a.timeStamp},n.a.createElement(E,null)))}}]),t}(n.a.Component),j="".concat("http://localhost:8080","/api");function C(){return{type:"SET_POSTS",payload:fetch("".concat(j,"/list")).then(function(e){return e.json()}).catch(function(e){return e})}}function P(e){return{type:"UPDATE_POST",payload:fetch(j,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({query:e})}).then(function(e){return e.json()}).catch(function(e){return e})}}function T(e){return{type:"UPDATE_SOURCE",payload:fetch(j,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({query:e})}).then(function(e){return e.json()}).catch(function(e){return e})}}function k(){return{type:"REFRESH_POSTS",payload:fetch(j,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({query:{action:["post","refresh"]}})}).then(function(e){return e.json()}).catch(function(e){return e})}}function A(e){return{type:"ADD_SOURCE",payload:fetch(j,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({query:e})}).then(function(e){return e.json()}).catch(function(e){return e})}}function M(e){return e.action&&e.id?{type:"DELETE_SOURCE",payload:fetch(j,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({query:e})}).then(function(e){return e}).catch(function(e){return e})}:"Missing action and/or id"}function N(){return{type:"SET_SOURCES",payload:fetch("".concat(j,"/sources")).then(function(e){return e.json()})}}function R(e){return{type:"SELECT_POST",payload:fetch("".concat(j,"/post/").concat(e)).then(function(e){return e.json()})}}var D=o(21),x=o.n(D),L=function(e){function t(){var e,o;Object(m.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(o=Object(_.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(n)))).handleClick=function(){"Show/Hide Read"===o.props.name?(o.props.options.showRead(""),o.props.options.menuOpen("")):"toggle"!==o.props.name?(o.props.options.menuOpen(""),o.props.options.show(o.props.name)):o.props.options.menuOpen("")},o}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=x.a.button,t=this.props.name;return"toggle"===t&&(t="\u22ee",e=this.props.options.menuStatus?x.a.buttonArrowOpen:x.a.buttonArrow),n.a.createElement("div",{onClick:this.handleClick,className:e},t)}}]),t}(n.a.Component),W=o(27),I=o.n(W),U=function(e){function t(){return Object(m.a)(this,t),Object(_.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=I.a.menu;return this.props.options.menuStatus&&(e=I.a.menuOpen),n.a.createElement("nav",{className:e},n.a.createElement(L,{options:this.props.options,name:"toggle"}),n.a.createElement(L,{options:this.props.options,name:"Sources"}),n.a.createElement(L,{options:this.props.options,name:"Show/Hide Read"}),n.a.createElement(L,{options:this.props.options,name:"Home"}))}}]),t}(n.a.Component),H=o(7),B=o(17),J=o.n(B),q=function(e){function t(){var e,o;Object(m.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(o=Object(_.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(s)))).toggleModule=function(e){o.props.moduleToggle(e.target.innerText)},o.render=function(){var e="HOME",t=n.a.createElement("button",null,o.props.read?n.a.createElement(H.d,{onClick:o.props.readToggle}):n.a.createElement(H.e,{onClick:o.props.readToggle}));"show"===o.props.mode?(t=null,e="BACK"):"SOURCES"===o.props.mode&&(t=null);var a=n.a.createElement("button",{className:J.a.text,onClick:o.toggleModule},e);return n.a.createElement("section",{className:J.a.smartMenu},a,n.a.createElement("button",null,n.a.createElement(H.f,{onClick:o.props.refresh,className:J.a.refresh})),t,n.a.createElement("button",{className:J.a.text,onClick:o.toggleModule},"SOURCES"))},o}return Object(b.a)(t,e),t}(n.a.Component),F=o(28),z=o.n(F),Q=function(e){function t(){var e,o;Object(m.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(o=Object(_.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(n)))).handleClick=function(){o.props.selector()},o}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=z.a.postTitle;return"show"===this.props.mode&&(e=z.a.postTitleShow),n.a.createElement("header",{onClick:this.handleClick,className:e},this.props.postTitle)}}]),t}(n.a.Component),X=o(29),Z=o(15),V=o.n(Z),G=function(e){function t(){var e,o;Object(m.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(o=Object(_.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(n)))).updatePost=function(){o.props.action(o.props.type)},o}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=n.a.createElement(H.g,null),t=V.a.delete;switch(this.props.type){case"star":e=n.a.createElement(X.b,null),t=V.a.button,this.props.value&&(e=n.a.createElement(X.a,null),t=V.a.on);break;case"read":e=n.a.createElement(H.a,null),t=V.a.read,this.props.value&&(e=n.a.createElement(H.b,null),t=V.a.unRead)}return n.a.createElement("button",{className:t,onClick:this.updatePost},e)}}]),t}(n.a.Component),K=o(30),Y=o.n(K),$=function(e){function t(){return Object(m.a)(this,t),Object(_.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=Y.a.source;return"show"===this.props.mode&&(e=Y.a.sourceShow),n.a.createElement("div",{className:e},"@ ",this.props.source)}}]),t}(n.a.Component),ee=function(e){return"~".concat(e.volume," ").concat(e.units)},te=o(31),oe=o.n(te),ae=function(e){function t(){return Object(m.a)(this,t),Object(_.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=oe.a.divider;return this.props.card&&(e=oe.a.dividerCard),n.a.createElement("div",{className:e})}}]),t}(n.a.Component),ne=o(16),se=o.n(ne),re=function(e){function t(){var e,o;Object(m.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(o=Object(_.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(n)))).handleClick=function(){o.props.selector(o.props.post._id)},o.handleAction=function(e){o.props.update({action:"update",field:e,value:!o.props.post["".concat(e)],postId:o.props.post._id})},o}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e="".concat(this.props.post.text.replace(/<(?:.|\n)*?>/gm," "),"..."),t=se.a.body;return this.props.post.read&&(t=se.a.bodyRead),n.a.createElement("section",{className:t,id:this.props.post._id},n.a.createElement(Q,{mode:"card",selector:this.handleClick,postTitle:this.props.post.title}),n.a.createElement("section",{className:se.a.secondLine},n.a.createElement($,{mode:"card",source:this.props.post.source}),n.a.createElement("div",{className:se.a.buttonsWrapper},n.a.createElement(G,{type:"star",value:this.props.post.star,action:this.handleAction}),n.a.createElement(G,{type:"read",value:this.props.post.read,action:this.handleAction}))),n.a.createElement("section",{className:se.a.text,onClick:this.handleClick,dangerouslySetInnerHTML:{__html:e}}),n.a.createElement("footer",null,n.a.createElement(E,{timestamp:new Date(this.props.post.published)}),n.a.createElement(ee,{volume:this.props.post.readTime,units:"mins",mode:"card"})),n.a.createElement(ae,null))}}]),t}(n.a.Component),ce=o(39),ie=o.n(ce),ue=function(e){function t(){var e,o;Object(m.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(o=Object(_.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(s)))).selectPostToShow=function(e){o.props.selectPost(e)},o.updatePostAction=function(e){o.props.updatePost(e)},o.checkPost=function(e){return o.props.showRead||e.read?o.props.showRead?n.a.createElement(re,{key:e._id,selector:o.selectPostToShow,update:o.updatePostAction,post:e}):null:n.a.createElement(re,{key:e._id,selector:o.selectPostToShow,update:o.updatePostAction,post:e})},o}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return this.props.posts.length>0?n.a.createElement("section",{className:ie.a.flex},this.props.posts.map(function(t){return e.checkPost(t)})):null}}]),t}(n.a.Component),le=o(22),pe=o.n(le),de=function(e){function t(){var e,o;Object(m.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(o=Object(_.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(n)))).handleClick=function(){"add"===o.props.type&&o.props.show(""),"delete"===o.props.type&&o.props.sourceDelete(""),"refresh"===o.props.type&&o.props.refresh(""),"edit"===o.props.type&&o.props.toggleEditSource(o.props.sourceId)},o}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e="Add Source",t=pe.a.button;switch(this.props.type){case"edit":e=n.a.createElement(H.c,null);break;case"refresh":e="Refresh",t=pe.a.refreshSource;break;case"add":t=pe.a.addSource;break;default:e=n.a.createElement(H.g,null)}return n.a.createElement("button",{className:t,onClick:this.handleClick},e)}}]),t}(n.a.Component),he=o(11),me=o(9),fe=o.n(me),_e=function(e){function t(e){var o;return Object(m.a)(this,t),o=Object(_.a)(this,Object(S.a)(t).call(this,e)),e.source?o.state={name:e.source.name,url:e.source.url,home:e.source.home}:o.state={name:"",url:"",home:""},o.handleChange=o.handleChange.bind(Object(he.a)(Object(he.a)(o))),o.handleSubmit=o.handleSubmit.bind(Object(he.a)(Object(he.a)(o))),o}return Object(b.a)(t,e),Object(f.a)(t,[{key:"handleChange",value:function(e){var t={};t[e.target.name]=e.target.value,this.setState(t)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={name:e.target[0].value,url:e.target[1].value,home:e.target[2].value};if("Update"===this.props.mode)if(t.name===this.props.source.name&&t.url===this.props.source.url&&t.home===this.props.source.home)this.props.toggleEditSource();else{var o={id:this.props.source._id,values:t};this.props.toggleEditSource(),this.props.updateSource(o)}else"Create"===this.props.mode&&(this.props.toggle(),this.props.create(t))}},{key:"render",value:function(){return n.a.createElement("form",{onSubmit:this.handleSubmit,className:fe.a.createForm},n.a.createElement("label",null,n.a.createElement("div",{className:fe.a.labelTitle},"Name"),n.a.createElement("input",{className:fe.a.input,type:"text",name:"name",value:this.state.name,onChange:this.handleChange})),n.a.createElement("label",null,n.a.createElement("div",{className:fe.a.labelTitle},"URL"),n.a.createElement("input",{type:"text",name:"url",value:this.state.url,onChange:this.handleChange})),n.a.createElement("label",null,n.a.createElement("div",{className:fe.a.labelTitle},"Homepage"),n.a.createElement("input",{type:"text",name:"home",value:this.state.home,onChange:this.handleChange})),n.a.createElement("div",{className:fe.a.center},n.a.createElement("button",{className:fe.a.submit,as:"input",type:"submit",value:"Submit"},this.props.mode)))}}]),t}(n.a.Component),Se=o(13),be=o.n(Se),ve=function(e){function t(){var e,o;Object(m.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(o=Object(_.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(n)))).sourceDelete=function(){o.props.sourceDelete(o.props.source._id)},o}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=!1;return this.props.showEditSourceId===this.props.source._id&&this.props.showEdit&&(e=!0),n.a.createElement("section",{className:be.a.sectionWrapper},n.a.createElement("div",{className:be.a.section},n.a.createElement("section",{className:be.a.nameWrapper},n.a.createElement("p",{onClick:this.goHome,className:be.a.name},this.props.source.name),n.a.createElement("p",{className:be.a.url},this.props.source.url)),n.a.createElement("section",{className:be.a.buttonsWrapper},n.a.createElement(de,{type:"edit",toggleEditSource:this.props.toggleEditSource,sourceId:this.props.source._id}),n.a.createElement(de,{type:"delete",sourceDelete:this.sourceDelete}))),e?n.a.createElement(_e,{mode:"Update",toggleEditSource:this.props.toggleEditSource,source:this.props.source,updateSource:this.props.updateSource}):null)}}]),t}(n.a.Component),ge=o(23),Ee=o.n(ge),we=function(e){function t(){var e,o;Object(m.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(o=Object(_.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(n)))).state={showAddSource:!1,showEditSource:!1,showEditSourceId:"",message:""},o.toggleAddSource=function(){o.state.showEditSource&&o.setState({showEditSource:!1,showEditSourceId:""}),o.setState(function(e){return{showAddSource:!o.state.showAddSource}})},o.toggleEditSource=function(e){o.state.showAddSource&&o.setState({showAddSource:!1}),o.state.showEditSource?e===o.state.showEditSourceId?o.setState({showEditSource:!o.state.showEditSource,showEditSourceId:e}):e&&e!==o.state.showEditSourceId?o.setState({showEditSource:!0,showEditSourceId:e}):o.setState({showEditSource:!1,showEditSourceId:""}):o.setState({showEditSource:!0,showEditSourceId:e})},o.changeMessage=function(e){o.setState({message:e}),setTimeout(o.clearMessage,3e3)},o.clearMessage=function(){o.setState({message:""})},o.createSource=function(e){""!==e.name&&""!==e.home&&""!==e.url||o.changeMessage("Not enough info. Source not created.");var t={action:["source","create"],fields:e};o.props.addSource(t)},o.updateSource=function(e){""!==e.values.name&&""!==e.values.home&&""!==e.values.url&&""!==e.values.id||o.changeMessage("Not enough info. Source not created.");var t={action:["source","update"],id:e.id,fields:e.values};o.props.updateSource(t)},o.sourceDelete=function(e){var t={action:["source","delete"],id:e};o.props.deleteSource(t),o.fetchSources()},o.handleRefreshPosts=function(){o.props.refreshPosts()},o}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return this.props.sources.length>0?n.a.createElement("section",{className:Ee.a.section},n.a.createElement("div",{className:Ee.a.buttonsWrapper},n.a.createElement(de,{type:"add",show:this.toggleAddSource,name:"Add Source"})),this.state.showAddSource?n.a.createElement(_e,{mode:"Create",create:this.createSource,toggle:this.toggleAddSource}):null,""===this.state.message?null:n.a.createElement("div",{className:Ee.a.message},this.state.message),this.props.sources.map(function(t){return n.a.createElement(ve,{source:t,key:t._id,sourceDelete:e.sourceDelete,showEdit:e.state.showEditSource,showEditSourceId:e.state.showEditSourceId,toggleEditSource:e.toggleEditSource,updateSource:e.updateSource})})):null}}]),t}(n.a.Component),ye=o(10),Oe=o.n(ye),je=function(e){function t(){var e,o;Object(m.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(o=Object(_.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(n)))).state={star:o.props.post.star,height:0},o.handleClick=function(){window.open(o.props.post.url,"_blank")},o.handleAction=function(e){"star"===e&&o.setState({star:!o.state.star});var t={action:"update",field:e,value:!o.props.post["".concat(e)],postId:o.props.post._id,module:"show"};"delete"===e&&(t.action="delete"),o.props.updatePost(t)},o.componentDidMount=function(){window.scrollTo(0,0)},o}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t="";return t=this.props.post.author?"by ".concat(this.props.post.author):"",n.a.createElement("article",{className:Oe.a.body},n.a.createElement(Q,{mode:"show",selector:this.handleClick,postTitle:this.props.post.title}),n.a.createElement("div",{className:Oe.a.secondLine},n.a.createElement("div",{className:Oe.a.sourceAuthorWrapper},n.a.createElement("div",{className:Oe.a.author},t),n.a.createElement($,{mode:"show",source:this.props.post.source})),n.a.createElement("div",{className:Oe.a.buttonsWrapper},n.a.createElement(G,{type:"star",value:this.state.star,postId:this.props.post._id,action:this.handleAction}),n.a.createElement(G,{type:"delete",postId:this.props.post._id,action:this.handleAction}))),n.a.createElement("section",{ref:function(t){return e.divElement=t},className:Oe.a.text,dangerouslySetInnerHTML:{__html:this.props.post.text}}),n.a.createElement("footer",null,n.a.createElement(ae,null),n.a.createElement("div",{className:Oe.a.statusLine},n.a.createElement(E,{pre:"published:",timestamp:new Date(this.props.post.published),mode:"show"}),n.a.createElement(E,{pre:"parsed:",timestamp:new Date(this.props.post.parsed),mode:"show"}),n.a.createElement("div",null,n.a.createElement(ee,{volume:this.props.post.pages,units:"pages"})))))}}]),t}(n.a.Component),Ce=o(32),Pe=o.n(Ce),Te=function(e){function t(){var e,o;Object(m.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(o=Object(_.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(n)))).state={post:{},posts:[],sources:[],sourceList:[],module:"HOME",menuOpen:!1,showRead:!1,actionMessage:""},o.handleRefreshClick=function(){o.props.refreshPosts().then(function(){o.updateMessage("Posts refreshed.")})},o.fetchPostsSources=function(){o.props.setPosts().then(function(e){o.setState({posts:e.payload}),o.updateMessage(e.payload.message)}),o.props.setSources().then(function(e){o.setState({sources:e.payload}),o.updateMessage(e.payload.message)})},o.updateStatePosts=function(e){var t=[];o.state.posts.forEach(function(o){if(o._id===e.postId){var a=o;a["".concat(e.field)]=e.value,t.push(a)}else t.push(o)}),o.setState({posts:t})},o.updatePostAction=function(e){var t="";switch(e.action){case"delete":t=["post","delete"];break;default:t=["post","update"]}var a={};a["".concat(e.field)]=e.value;var n={id:e.postId,action:t,fields:a};o.updateStatePosts({field:e.field,value:e.value,postId:e.postId}),o.props.updatePost(n).then(function(){return o.updateMessage("Post updated.")}),"delete"===e.action&&"show"===e.module&&o.showModule("HOME")},o.selectPostToShow=function(e){o.updatePostAction({action:"update",field:"read",value:!0,postId:e}),o.props.selectPost(e).then(function(e){o.showModule("show"),o.setState({post:e.payload})})},o.showModule=function(e){o.setState({module:e})},o.menuOpen=function(){o.setState({menuOpen:!o.state.menuOpen})},o.showRead=function(){o.setState({showRead:!o.state.showRead})},o.updateMessage=function(e){o.setState({actionMessage:e}),setInterval(function(){return o.setState({actionMessage:""})},6e3)},o}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentWillMount",value:function(){this.fetchPostsSources()}},{key:"componentDidMount",value:function(){this.refresher=setInterval(this.fetchPostsSources,5e3),window.scrollTo(0,0)}},{key:"componentWillUnmount",value:function(){clearInterval(this.refresher)}},{key:"render",value:function(){var e={show:this.showModule,menuOpen:this.menuOpen,menuStatus:this.state.menuOpen,showRead:this.showRead},t=n.a.createElement(ue,{showRead:this.state.showRead,posts:this.state.posts,selectPost:this.selectPostToShow,updatePost:this.updatePostAction});switch(this.state.module){case"show":t=n.a.createElement(je,{post:this.state.post,updatePost:this.updatePostAction});break;case"SOURCES":t=n.a.createElement(we,{sources:this.state.sources,addSource:this.props.addSource,deleteSource:this.props.deleteSource,updateSource:this.props.updateSource})}var o=this.state.actionMessage?n.a.createElement("div",{className:Pe.a.actionMessage},this.state.actionMessage):null;return n.a.createElement("div",{className:Pe.a.contentDisplay},o,n.a.createElement(q,{read:this.state.showRead,readToggle:this.showRead,refresh:this.handleRefreshClick,moduleToggle:this.showModule,mode:this.state.module,sources:this.state.sources}),t,n.a.createElement(U,{options:e}))}}]),t}(n.a.Component),ke=Object(c.b)(function(e){return{posts:e.posts,selectPost:e.selectPost,selectModule:e.selectModule,updatePost:e.updatePost,sources:e.sources,addSource:e.addSource,deleteSource:e.deleteSource,updateSource:T}},function(e){return Object(i.b)({setPosts:C,selectPost:R,updatePost:P,refreshPosts:k,setSources:N,addSource:A,deleteSource:M,updateSource:T},e)})(Te),Ae=function(e){function t(){return Object(m.a)(this,t),Object(_.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(O,null),n.a.createElement(ke,null))}}]),t}(n.a.Component),Me=(o(53),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function Ne(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var o=e.installing;null!=o&&(o.onstatechange=function(){"installed"===o.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}h.a.load({google:{families:["Alegreya:400,400i,500,500i,700,700i:cyrillic,cyrillic-ext,latin-ext","Open+Sans:300,300i,400","Roboto+Mono:300"]}});var Re=Object(i.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POSTS":return t.payload;default:return e}},sources:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SOURCES":return t.payload;default:return e}},addSource:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SOURCE":return t.payload;default:return e}},selectPost:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_POST":return t.payload;default:return e}},updatePost:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_POST":return t.payload;default:return e}},updateSource:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SOURCE":return t.payload;default:return e}},deleteSource:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DELETE_SOURCE":return t.payload;default:return e}},refreshPostsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_POST":return t.payload;default:return e}},sourceCreateModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_MODULE":return t.payload;default:return e}}}),De=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d)(Object(i.a)(p.a,u.logger));r.a.render(n.a.createElement(c.a,{store:Object(i.e)(Re,{posts:[],sources:[],addSource:"",updatePost:"",selectPost:"",sourceCreateModule:!0,deleteSource:"",refreshPostsReducer:""},De)},n.a.createElement(Ae,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Me?(function(e,t){fetch(e).then(function(o){var a=o.headers.get("content-type");404===o.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ne(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Ne(t,e)})}}()}],[[40,1,2]]]);
//# sourceMappingURL=main.6bdf8b4e.chunk.js.map