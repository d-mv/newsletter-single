{"version":3,"sources":["components/Login.tsx","components/Home.tsx","styles/LoginForm.module.scss","styles/Home.module.scss"],"names":["connect","state","user","authStatus","checkUser","currentUser","setAuthStatus","withCookies","props","_React$useState","React","useState","_React$useState2","Object","slicedToArray","userName","setUserName","_React$useState3","_React$useState4","userEmail","setUserEmail","_React$useState5","_React$useState6","userPassword","setUserPassword","_React$useState7","_React$useState8","nameError","setNameError","_React$useState9","_React$useState10","emailError","setEmailError","_React$useState11","_React$useState12","passwordError","setPasswordError","_React$useState13","_React$useState14","authNew","setAuthNew","_React$useState15","_React$useState16","_React$useState17","_React$useState18","loginMessage","setLoginMessage","cookies","checkEmail","mail","check","length","checkPassword","pass","handleInputChange","event","target","name","value","nameEnter","react_default","a","createElement","className","style","label","type","onChange","formStyle","loginTall","login","title","inputErrors","error","onSubmit","preventDefault","checkName","lProps","action","new","query","id","fields","then","res","response","payload","data","console","log","status","token","email","set","path","message","password","submit","aria-label","Home","showLogin","setShowLogin","home","subTitle","screenshot","buttonWrapper","onClick","components_Login","module","exports"],"mappings":"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","file":"static/js/6.b25566d4.chunk.js","sourcesContent":["import React from \"react\";\n\nimport { withCookies } from \"react-cookie\";\nimport { connect } from \"react-redux\";\nimport { AppState } from \"../store\";\nimport { AuthObj } from \"../types\";\nimport {\n  CHECK_USER,\n  UserQuery,\n  CURRENT_USER,\n  CurrentUser\n} from \"../store/user/types\";\n\nimport { checkUser, currentUser, setAuthStatus } from \"../store/user/actions\";\n\nimport style from \"../styles/LoginForm.module.scss\";\n\nconst Login = (props: {\n  checkUser: (arg0?: any) => any;\n  currentUser: (arg0: CurrentUser) => any;\n  // message: string;\n  setAuthStatus: (arg0:boolean)=>any;\n  cookies: any;\n  // login: (arg0: any) => any;\n  // newUser: boolean;\n}) => {\n  const [userName, setUserName] = React.useState(\"\");\n  const [userEmail, setUserEmail] = React.useState(\"\");\n  const [userPassword, setUserPassword] = React.useState(\"\");\n  const [nameError, setNameError] = React.useState(\"\");\n  const [emailError, setEmailError] = React.useState(\"\");\n  const [passwordError, setPasswordError] = React.useState(\"\");\n\n  const [authNew, setAuthNew] = React.useState(false);\n  const [showLogin, setShowLogin] = React.useState(false);\n  const [loginMessage, setLoginMessage] = React.useState(\"\");\n\n  const { cookies } = props;\n\n  const checkName = (name: string) => {\n    const check = name.length > 3 ? true : false;\n    if (check) {\n      setNameError(\"\");\n    } else {\n      setNameError(\"Name is too short\");\n    }\n    return check;\n  };\n\n  const checkEmail = (mail: string) => {\n    const check = mail.length > 0 ? true : false;\n    if (check) {\n      setEmailError(\"\");\n    } else {\n      setEmailError(\"Email is missing\");\n    }\n    return check;\n  };\n\n  const checkPassword = (pass: string) => {\n    const check = pass.length > 6 ? true : false;\n    if (check) {\n      setPasswordError(\"\");\n    } else {\n      setPasswordError(\"Password too short\");\n    }\n    return check;\n  };\n\n  const login = (lProps: AuthObj) => {\n    const action = lProps.new ? \"create\" : \"login\";\n    const query = {\n      action: [\"user\", lProps.new ? \"create\" : action],\n      id: \"\",\n      fields: lProps.fields\n    };\n    props.checkUser(query).then((res: any) => {\n      const response = res.payload.data;\n      console.log(response);\n      if (response.user === \"new\") {\n        setAuthNew(true);\n      } else if (response.status) {\n        setLoginMessage(\"\");\n        props.currentUser({\n          token: response.user.token,\n          email: response.user.email\n        });\n        props.setAuthStatus(true)\n        cookies.set(\"email\", response.user.email, { path: \"/\" });\n        cookies.set(\"token\", response.user.token, { path: \"/\" });\n      } else {\n        setLoginMessage(response.data.message);\n      }\n    });\n  };\n\n  const handleSubmit = (event: any) => {\n    event.preventDefault();\n\n    let check;\n    if (authNew) {\n      check =\n        checkName(userName) &&\n        checkEmail(userEmail) &&\n        checkPassword(userPassword);\n    } else {\n      check = checkEmail(userEmail) && checkPassword(userPassword);\n    }\n    if (check) {\n      const authObj = {\n        new: authNew,\n        fields: {\n          name: userName,\n          email: userEmail,\n          password: userPassword\n        }\n      };\n      login(authObj);\n    }\n  };\n\n  // const test = () => {\n  //   props.currentUser({ token: \"1234\", email: \"222@222.222\" });\n  // };\n\n  // test();\n\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    switch (event.target.name) {\n      case \"uName\":\n        setUserName(event.target.value);\n        break;\n      case \"uPass\":\n        setUserPassword(event.target.value);\n        break;\n      default:\n        setUserEmail(event.target.value);\n        break;\n    }\n  };\n\n  const nameEnter = authNew ? (\n    <label>\n      <span className={style.label}>Name</span>\n      <input\n        type=\"text\"\n        name=\"uName\"\n        value={userName}\n        onChange={handleInputChange}\n      />\n    </label>\n  ) : null;\n  const formStyle = authNew ? style.loginTall : style.login;\n  const title = authNew ? \"Register new user\" : \"Login details\";\n\n  const inputErrors = (\n    <div className={style.error}>\n      {nameError ? <li>{nameError}</li> : null}\n      {emailError ? <li>{emailError}</li> : null}\n      {passwordError ? <li>{passwordError}</li> : null}\n      {loginMessage ? <li>{loginMessage}</li> : null}\n    </div>\n  );\n\n  return (\n    <section className={formStyle}>\n      <h1>{title}</h1>\n      <form onSubmit={handleSubmit}>\n        {nameEnter}\n        <label>\n          <span className={style.label}>Email</span>\n          <input\n            type=\"email\"\n            name=\"uMail\"\n            value={userEmail}\n            onChange={handleInputChange}\n          />\n        </label>\n        <label>\n          <span className={style.label}>Password</span>\n          <input\n            type=\"password\"\n            name=\"uPass\"\n            value={userPassword}\n            onChange={handleInputChange}\n          />\n        </label>\n        {inputErrors}\n        <button\n          className={style.submit}\n          aria-label={authNew ? \"Register\" : \"Login\"}\n        >\n          <input\n            type=\"button\"\n            value={authNew ? \"Register\" : \"Login\"}\n            id=\"submit_button\"\n          />\n        </button>\n      </form>\n    </section>\n  );\n};\n\nconst mapStateToProps = (state: AppState) => {\n  return {\n    user: state.user,\n    authStatus: state.authStatus\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  { checkUser, currentUser, setAuthStatus }\n)(withCookies(Login));\n","import React from \"react\";\n\nimport Login from \"./Login\";\n\nimport \"../styles/_ui.scss\";\nimport style from \"../styles/Home.module.scss\";\n\nconst Home = () => {\n  const [showLogin, setShowLogin] = React.useState(false);\n\n  return (\n    <main className={style.home}>\n      <h1 className={style.title}>The Newsletter</h1>\n      <h2 className={style.subTitle}>Just information.</h2>\n      <div className={style.screenshot} />\n      <div className={style.buttonWrapper}>\n        <button\n          className=\"button\"\n          aria-label=\"Login or register\"\n          onClick={() => setShowLogin(!showLogin)}\n        >\n          Login or register\n        </button>\n      </div>\n      {showLogin ? (\n        <div className=\"modal\">\n          <Login />\n        </div>\n      ) : null}\n    </main>\n  );\n};\n\nexport default Home;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"LoginForm_login__pgnVi\",\"loginTall\":\"LoginForm_loginTall__3xFXP\",\"label\":\"LoginForm_label__Exx1P\",\"submit\":\"LoginForm_submit__3_ICg\",\"error\":\"LoginForm_error__2pBlE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"Home_home__2jlRQ\",\"title\":\"Home_title__1maBB\",\"subTitle\":\"Home_subTitle__17VvD\",\"screenshot\":\"Home_screenshot__305jA\",\"buttonWrapper\":\"Home_buttonWrapper__1GPzh\"};"],"sourceRoot":""}