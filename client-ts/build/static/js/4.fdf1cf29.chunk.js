(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{77:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(5),r=n(6),o=n(26);function s(){var e=Object(a.a)(["\n  font-weight: 300;\n  background: none;\n  border: none;\n  border-bottom: ",";\n  background-color: ",";\n  color: ",";\n  font-family: ",";\n  border-radius: 2px;\n  margin: 0.2rem auto;\n  padding: 10px;\n  font-size: 1rem;\n  letter-spacing: 1px;\n  outline: none;\n  box-shadow: ",";\n  transition: ",";\n  user-select: none;\n  cursor: pointer;\n  &:hover {\n    box-shadow: ",";\n    border-bottom: ",";\n  }\n  &:active {\n    transform: scale(0.95);\n    box-shadow: ",";\n    border-bottom: ",";\n  }\n"]);return s=function(){return e},e}var c=r.a.button(s(),o.e,o.b,o.n,o.d,o.i,o.k,o.j,o.g,o.i,o.g)},78:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return d});var a=n(5),r=n(6);function o(){var e=Object(a.a)(["\n    0% {\n            transform: translateY(-30%);\n            filter:opacity(0)\n\n    }\n    100% {\n           transform: translateY(0);\n\n    }\n    "]);return o=function(){return e},e}function s(){var e=Object(a.a)(["\n    0% {\n      transform: scale(0);\n    }\n    100% {\n      transform: scale(1);\n    }\n    "]);return s=function(){return e},e}function c(){var e=Object(a.a)(["\n    0% {\n      transform: translateX(-100%);\n    }\n    100% {\n      transform: translateY(0);\n    }\n  "]);return c=function(){return e},e}function u(){var e=Object(a.a)(["\n    0% {\n      transform: translateY(-100%);\n    }\n    100% {\n      transform: translateX(0);\n    }"]);return u=function(){return e},e}function i(){var e=Object(a.a)(["\n0% {transform:scale(0)} 100%{transform:scale(1)}\n"]);return i=function(){return e},e}var l=Object(r.b)(i()),d=(Object(r.b)(u()),Object(r.b)(c()),Object(r.b)(s()),Object(r.b)(o()))},81:function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"f",function(){return h}),n.d(t,"c",function(){return b}),n.d(t,"g",function(){return v}),n.d(t,"e",function(){return g}),n.d(t,"b",function(){return w}),n.d(t,"d",function(){return E});var a=n(5),r=n(6),o=n(26),s=n(78);function c(){var e=Object(a.a)(["\n  @media (max-width: 499px) {\n    display: none;\n  }\n  @media (min-width: 500px) {\n    /* span {} */\n  }\n"]);return c=function(){return e},e}function u(){var e=Object(a.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: ",";\n"]);return u=function(){return e},e}function i(){var e=Object(a.a)(["\n  display: flex;\n  font-family: ",";\n  justify-content: space-between;\n  font-size: 80%;\n  font-weight: 300;\n  padding: 0 0.3rem;\n"]);return i=function(){return e},e}function l(){var e=Object(a.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-content: center;\n  font-weight: 300;\n  font-family: ",";\n  letter-spacing: 0.03rem;\n  font-size: 0.8rem;\n  padding-top: 0.6rem;\n"]);return l=function(){return e},e}function d(){var e=Object(a.a)(["\n  font-size: 1.1rem;\n  padding: 0 0 0.3rem 0;\n  cursor: pointer;\n  margin-bottom: 5px;\n  line-height: 1.4rem;\n\n  @media (max-width: 499px) {\n    font-size: 1.3rem;\n  }\n"]);return d=function(){return e},e}function f(){var e=Object(a.a)(["\n  cursor: pointer;\n  font-weight: 500;\n  margin: 0;\n  line-height: 1.6rem;\n  font-size: 1.3rem;\n  @media (max-width: 499px) {\n    font-size: 1.5rem;\n    line-height: 1.8rem;\n  }\n"]);return f=function(){return e},e}function p(){var e=Object(a.a)(["\n  animation: 0.3s ease-out 0s 1 ",";\n\n  @media (min-width: 499px) {\n    .text {\n      max-height: 50rem;\n    }\n  }\n\n  margin: 0 auto;\n  margin-bottom: 1rem;\n  padding-bottom: 1rem;\n\n  border-bottom: 1px solid ",";\n  @media (max-width: 699px) {\n    width: 100%;\n  }\n\n  @media (min-width: 700px) and (max-width: 949px) {\n    width: 45%;\n  }\n\n  @media (min-width: 950px) and (max-width: 1199px) {\n    width: 30%;\n  }\n\n  @media (min-width: 1200px) and (max-width: 1599px) {\n    width: 23%;\n  }\n\n  @media (min-width: 1599px) and (max-width: 4000px) {\n    width: 18%;\n  }\n"]);return p=function(){return e},e}var m=r.a.article(p(),s.a,o.l),h=r.a.h3(f()),g=r.a.main(d()),b=r.a.section(l(),o.q),w=r.a.footer(i(),o.q),v=r.a.div(u(),function(e){return e.margin}),E=r.a.span(c())},83:function(e,t,n){"use strict";var a={1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},r={1:"Sun",2:"Mon",3:"Tue",4:"Wed",5:"Thu",6:"Fri",7:"Sat"};t.a=function(e){var t=new Date;Object.keys(e).length||(t=new Date(e));var n="".concat(t.getHours(),":").concat(t.getMinutes()," am");return t.getHours()>12&&(n="".concat(t.getHours()-12,":").concat(t.getMinutes()," pm")),"".concat(r[t.getDay()+1]," ").concat(t.getDate()," ").concat(a[t.getMonth()+1]," at ").concat(n)}},84:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(89),s=n(81);t.a=function(e){var t="show"===e.mode?"".concat(e.author," @ ").concat(e.source):"@".concat(e.source);return r.a.createElement(s.c,null,r.a.createElement(s.g,null,t),r.a.createElement(s.g,null,r.a.createElement(o.a,{update:e.update,id:e.id,mode:"star",status:e.star},e.buttons.star),r.a.createElement(o.a,{update:e.update,id:e.id,mode:"read",status:e.read},e.buttons.read)))}},85:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(83),s=n(81);t.a=function(e){var t="~".concat(e.readingTime," mins"),n=e.parsed?r.a.createElement(s.g,null,r.a.createElement(s.d,null,"parsed: "),Object(o.a)(e.parsed)):null;return r.a.createElement(s.b,null,r.a.createElement(s.g,null,r.a.createElement(s.d,null,"posted: "),Object(o.a)(e.timestamp)),n,r.a.createElement(s.g,null,t))}},89:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(5),s=n(6),c=n(26);function u(){var e=Object(o.a)(["\n  transition: 0.3s;\n\n  color: ",";\n  &:hover {\n    color: ",";\n  }\n"]);return u=function(){return e},e}function i(){var e=Object(o.a)(["\n  transition: 0.3s;\n\n  color: ",";\n  &:hover {\n    color: ",";\n  }\n"]);return i=function(){return e},e}function l(){var e=Object(o.a)(["\n  cursor: pointer;\n  outline: none;\n  font-size: 1.2rem;\n  margin: 0;\n  transition: 0.3s;\n\n  @media (max-width: 599px) {\n    font-size: 1.2rem;\n  }\n"]);return l=function(){return e},e}var d=s.a.button(l()),f=s.a.span(i(),c.l,c.b),p=s.a.span(u(),c.b,c.l);t.a=function(e){var t=e.status?r.a.createElement(p,null,e.children):r.a.createElement(f,null,e.children);return r.a.createElement(d,{onClick:function(){return e.update({field:e.mode,id:e.id})}},t)}},98:function(e,t,n){"use strict";n.r(t);var a=n(93),r=n(90),o=n(91),s=n(94),c=n(92),u=n(95),i=n(0),l=n.n(i),d=n(14),f=n(17),p=n(9),m=n.n(p);var h=n(35);var g=n(27),b=n(5),w=n(6),v=n(26);function E(){var e=Object(b.a)(["\n  font-family: ",";\n  color: ",";\n\n  @media (max-width: 302px) {\n    font-size: 1.5rem;\n  }\n\n  @media (min-width: 303px) and (max-width: 340px) {\n    font-size: 2rem;\n  }\n\n  @media (min-width: 341px) {\n    font-size: 2.5rem;\n  }\n  font-weight: 700;\n  margin: 0;\n  height: 3rem;\n"]);return E=function(){return e},e}var S=w.a.h1(E(),v.d,v.b),x=function(){return l.a.createElement(S,null,"The Newsletter")},y=n(83);function j(){var e=Object(b.a)(["\n  color: ",";\n  font-size: 100%;\n  font-weight: normal;\n"]);return j=function(){return e},e}var O=w.a.h5(j(),v.m),k=function(e){return l.a.createElement(O,null,Object(y.a)(e.date))};function P(){var e=Object(b.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  flex-wrap: wrap;\n  padding: 0;\n\n  margin: -10px 20px 20px 20px;\n  border-bottom: 1px solid ",";\n  cursor: default;\n  user-select: none;\n"]);return P=function(){return e},e}var R=w.a.header(P(),v.l),z=function(){return l.a.createElement(R,null,l.a.createElement(x,null),l.a.createElement(k,{date:new Date}))},T=n(80);function I(){var e=Object(b.a)(["\n  color: ",";\n  transition: 0.7s;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  outline: none;\n  margin: 0 5px;\n  padding: {\n    top: 3px;\n    left: 10px;\n    right: 10px;\n  }\n  font-family: ",";\n  font-size: 0.9rem;\n  letter-spacing: 1px;\n\n  &:hover {\n    color: ",";\n  }\n\n  &:active {\n    transform: scale(0.9);\n  }\n"]);return I=function(){return e},e}var F=w.a.button(I(),function(e){return e.accent?v.a:v.b},v.d,v.a),A=function(e){return l.a.createElement(F,{accent:e.accent,onClick:function(){return function(e){"BACK"===e.child||"HOME"===e.child?e.func("posts"):"SOURCES"===e.child?e.func("sources"):"profile"===e.mode?e.func("profile"):e.func()}({mode:e.mode,child:e.children,func:e.function})}},e.children)},M=n(78);function U(){var e=Object(b.a)(["\n  animation: 0.7s ease-out 0s 1 ",";\n  position: absolute;\n  left: 10vw;\n  top: 3.2rem;\n  transition: 0.7s;\n  width: 80vw;\n  height: 2rem;\n  font-family: ",";\n  font-weight: 300;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-transform: uppercase;\n  user-select: none;\n\n  @media (max-width: 435px) {\n    top: 4.5rem;\n    width: 100%;\n    left: 0;\n  }\n"]);return U=function(){return e},e}var C=w.a.nav(U(),M.b,v.d),q=function(e){return l.a.createElement(A,{accent:e.accent,mode:e.mode,function:e.function},e.element)},D=function(e){var t=q({element:"post"===e.mode?"BACK":"HOME",mode:"home",accent:!1,function:e.moduleToggle}),n=q({element:"SOURCES",mode:"sources",accent:!1,function:e.moduleToggle}),a="posts"===e.mode?q({element:e.read?l.a.createElement(T.d,null):l.a.createElement(T.e,null),mode:"showRead",accent:e.read,function:e.toggleRead}):null,r="posts"===e.mode?q({element:l.a.createElement(T.g,null),mode:"refresh",accent:!1,function:e.refresh}):null,o="posts"===e.mode?q({element:l.a.createElement(T.f,null),mode:"filter",accent:e.showFilter,function:e.toggleFilter}):null,s=q({element:l.a.createElement(T.i,null),mode:"profile",accent:!1,function:e.moduleToggle});return l.a.createElement(C,null,t,n,a,o,r,s)},_=n(21),H=n(86),J=n(84),Y=n(85),B=n(81),K=function(e){var t="".concat(e.post.text.replace(/<(?:.|\n)*?>/gm," "),"..."),n=e.post.star?l.a.createElement(H.a,null):l.a.createElement(H.b,null),a=e.post.read?l.a.createElement(T.b,null):l.a.createElement(T.a,null);return l.a.createElement(B.a,null,l.a.createElement(B.f,{onClick:function(){e.select({id:e.post._id})}},e.post.title),l.a.createElement(J.a,{mode:"card",source:e.post.source,author:e.post.author,buttons:{star:n,read:a},read:e.post.read,star:e.post.star,update:e.update,id:e.post._id}),l.a.createElement(B.e,{onClick:function(){e.select({id:e.post._id})}},t),l.a.createElement(Y.a,{timestamp:e.post.published,readingTime:e.post.readTime}))},N=n(22),W=function(e){return l.a.createElement(N.b,null,e.posts.map(function(t){var n=function(e){return l.a.createElement(K,{key:e.post._id,post:e.post,update:e.update,select:e.select})}({post:t,update:e.update,select:e.selectPost});return function(e){return e.filter?e.show?e.pSource===e.filter:e.pRead===e.show&&e.pSource===e.filter:!!e.show||e.pRead===e.show}({show:e.showRead,filter:e.filter,pRead:t.read,pSource:t.sourceId})?n:null}))},X=n(28),G=n(77),L=l.a.lazy(function(){return n.e(7).then(n.bind(null,101))}),Q=l.a.lazy(function(){return n.e(8).then(n.bind(null,96))}),V=l.a.lazy(function(){return n.e(10).then(n.bind(null,102))}),Z=l.a.lazy(function(){return n.e(5).then(n.bind(null,100))}),$=l.a.lazy(function(){return n.e(11).then(n.bind(null,97))}),ee=l.a.lazy(function(){return n.e(9).then(n.bind(null,88))}),te={_id:"",source:"",sourceId:"",title:"",url:"",author:"",published:new Date,parsed:new Date,text:"",readTime:0,pages:0,read:!1,star:!1},ne=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,u=new Array(o),d=0;d<o;d++)u[d]=arguments[d];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(u)))).state={loading:!0,module:"posts",showRead:!1,showFilter:!1,filterId:"",sources:[],posts:[],message:"",showPost:te,addSource:!1},n.loadPosts=function(e){n.props.loadPosts(e).then(function(e){n.setState({posts:e.payload.data,loading:!1})})},n.loadSources=function(e){n.props.loadSources(e).then(function(e){n.setState({sources:e.payload.data,loading:!1})})},n.fetchPostsSources=function(){var e={token:n.props.currentUser.token,action:["post","fetch"]},t={token:n.props.currentUser.token,action:["source","fetch"]};n.loadPosts(e),n.loadSources(t)},n.showModule=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"posts";console.log("show module - "+e),n.setState({module:e})},n.toggleShowRead=function(){n.setState({showRead:!n.state.showRead})},n.toggleShowFilter=function(){n.setState({showFilter:!n.state.showFilter})},n.chooseFilter=function(e){n.toggleShowFilter(),"clear"===e?n.setState({filterId:""}):n.setState({filterId:e})},n.handleRefreshClick=function(){var e={token:n.props.currentUser.token,action:["post","refresh"]};n.props.apiRequest(e).then(function(e){})},n.selectPostToShow=function(e){var t={token:n.props.currentUser.token,action:["post","show"],id:e.id};n.props.apiRequest(t).then(function(e){var t=e.payload.data;t.authed&&(n.showModule("post"),n.setState({showPost:t.post}))})},n.updateStatePosts=function(e){var t,a=n.state.posts;return a.filter(function(t){return t._id===e.id}).forEach(function(n){"read"===e.field?(t=n.read,n.read=!n.read):(t=n.star,n.star=!n.star)}),n.setState({posts:a}),t},n.updatePostAction=function(e){var t=n.updateStatePosts({id:e.id,field:e.field}),a={};a["".concat(e.field)]=!t;var r={token:n.props.currentUser.token,action:["post","update"],id:e.id,fields:a};n.props.updatePost(r).then(function(e){n.setState({message:e.statusText})})},n.updateSourceInState=function(e){var t=n.state.sources;t.filter(function(t){return t._id===e._id}).forEach(function(t){t.name=e.name,t.url=e.url,t.homepage=e.homepage}),n.setState({source:t})},n.updateSourceAction=function(e){console.log(e);var t={token:n.props.currentUser.token,action:["source","update"],fields:e};n.props.apiRequest(t).then(function(t){console.log(t);var a=t.payload.data.message;console.log(a),n.setState({message:a}),n.updateSourceInState(e)})},n.createSource=function(e){console.log("- create source:"),console.log(e);var t={token:n.props.currentUser.token,action:["source","create"],fields:e},r=e;r._id="012345";var o=[r],s=[].concat(Object(a.a)(n.state.sources),o);n.props.apiRequest(t).then(function(e){var t=e.payload.data;console.log(t),n.setState({message:t.message,addSource:!1,sources:s})})},n.toggleShowAddSource=function(){n.setState({addSource:!n.state.addSource})},n.checkIfSourcesEmpty=function(){return n.state.sources===[]||0===n.state.sources.length},n.checkIfPostsSourcesEmpty=function(){var e;return!n.checkIfSourcesEmpty()||n.state.posts!==[]&&0!==n.state.posts.length?n.state.posts!==[]&&0!==n.state.posts.length||(e="The are no posts for now."):e="There are no sources configured.",e},n.profile=l.a.createElement(i.Suspense,{fallback:l.a.createElement(_.a,null)},l.a.createElement($,{currentUser:n.props.currentUser,signOff:n.props.signOff})),n.addSource=l.a.createElement(i.Suspense,{fallback:l.a.createElement(_.a,null)},l.a.createElement(ee,{submit:n.createSource,close:n.toggleShowAddSource})),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.fetchPostsSources(),this.refresher=setInterval(this.fetchPostsSources,1e4),window.scrollTo(0,0)}},{key:"componentWillUnmount",value:function(){clearInterval(this.refresher)}},{key:"render",value:function(){var e,t,n=l.a.createElement(i.Suspense,{fallback:l.a.createElement(_.a,null)},l.a.createElement(V,{post:this.state.showPost,update:this.updatePostAction})),a=l.a.createElement(D,{read:this.state.showRead,toggleRead:this.toggleShowRead,refresh:this.handleRefreshClick,moduleToggle:this.showModule,mode:this.state.module,showFilter:""!==this.state.filterId,toggleFilter:this.toggleShowFilter}),r=this.state.showFilter&&this.state.sources?l.a.createElement(i.Suspense,{fallback:l.a.createElement(_.a,null)},l.a.createElement(Q,{toggle:this.toggleShowFilter,list:this.state.sources,choose:this.chooseFilter,id:this.state.filterId})):null,o=this.checkIfPostsSourcesEmpty();return e=this.state.loading?l.a.createElement(_.a,null):o?l.a.createElement(i.Suspense,{fallback:l.a.createElement(_.a,null)},l.a.createElement(L,{message:o})):l.a.createElement(W,{showRead:this.state.showRead,posts:this.state.posts,selectPost:this.selectPostToShow,update:this.updatePostAction,filter:this.state.filterId}),t=this.checkIfSourcesEmpty()?l.a.createElement(i.Suspense,{fallback:l.a.createElement(_.a,null)},l.a.createElement(L,{message:"The are no sources for now.",function:this.toggleShowAddSource},l.a.createElement(G.a,null,"Add source"))):l.a.createElement(i.Suspense,{fallback:l.a.createElement(_.a,null)},l.a.createElement(Z,{sources:this.state.sources,submit:this.createSource,update:this.updateSourceAction})),l.a.createElement(X.a,{"data-test":"app"},l.a.createElement(z,null),a,r,"posts"===this.state.module?e:null,"post"===this.state.module?n:null,"sources"===this.state.module?t:null,this.state.addSource?this.addSource:null,"profile"===this.state.module?this.profile:null)}}]),t}(l.a.Component);t.default=Object(d.b)(function(e){return{user:e.user}},{loadPosts:function(e){var t=m.a.post("/",{query:e}).then(function(e){return e}).catch(function(e){return e});return{type:f.b,payload:t}},updatePost:function(e){var t=m.a.post("/",{query:e}).then(function(e){return e}).catch(function(e){return e});return{type:f.c,payload:t}},selectPost:function(e){var t=m.a.get("/post/".concat(e)).then(function(e){return e}).catch(function(e){return e});return{type:f.a,payload:t}},loadSources:function(e){var t=m.a.post("/",{query:e}).then(function(e){return e}).catch(function(e){return e});return{type:h.a,payload:t}},apiRequest:g.a})(ne)}}]);
//# sourceMappingURL=4.fdf1cf29.chunk.js.map