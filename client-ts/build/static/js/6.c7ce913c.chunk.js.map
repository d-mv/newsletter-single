{"version":3,"sources":["components/Login.tsx","components/Home.tsx","styles/LoginForm.module.scss","styles/Home.module.scss"],"names":["connect","state","user","authStatus","checkUser","currentUser","setAuthStatus","withCookies","props","console","log","_React$useState","React","useState","_React$useState2","Object","slicedToArray","userName","setUserName","_React$useState3","_React$useState4","userEmail","setUserEmail","_React$useState5","_React$useState6","userPassword","setUserPassword","_React$useState7","_React$useState8","nameError","setNameError","_React$useState9","_React$useState10","emailError","setEmailError","_React$useState11","_React$useState12","passwordError","setPasswordError","_React$useState13","_React$useState14","authNew","setAuthNew","_React$useState15","_React$useState16","loginMessage","setLoginMessage","cookies","checkEmail","mail","check","length","checkPassword","pass","handleInputChange","event","target","name","value","nameEnter","react_default","a","createElement","className","style","label","type","onChange","formStyle","loginTall","login","title","inputErrors","error","onSubmit","preventDefault","checkName","lProps","action","new","query","id","fields","then","res","response","payload","data","status","token","email","set","path","toggle","message","password","submit","aria-label","Home","showLogin","setShowLogin","home","subTitle","screenshot","buttonWrapper","onClick","components_Login","module","exports"],"mappings":"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","file":"static/js/6.c7ce913c.chunk.js","sourcesContent":["import React from \"react\";\n\nimport { withCookies } from \"react-cookie\";\nimport { connect } from \"react-redux\";\nimport { AppState } from \"../store\";\nimport { AuthObj } from \"../types\";\nimport {\n  CurrentUser\n} from \"../store/user/types\";\n\nimport { checkUser, currentUser, setAuthStatus } from \"../store/user/actions\";\n\nimport style from \"../styles/LoginForm.module.scss\";\n\nconst Login = (props: {\n  checkUser: (arg0?: any) => any;\n  currentUser: (arg0: CurrentUser) => any;\n  setAuthStatus: (arg0:boolean)=>any;\n  cookies: any;\n  toggle:()=>void\n}) => {\n  console.log(props)\n  const [userName, setUserName] = React.useState(\"\");\n  const [userEmail, setUserEmail] = React.useState(\"\");\n  const [userPassword, setUserPassword] = React.useState(\"\");\n  const [nameError, setNameError] = React.useState(\"\");\n  const [emailError, setEmailError] = React.useState(\"\");\n  const [passwordError, setPasswordError] = React.useState(\"\");\n\n  const [authNew, setAuthNew] = React.useState(false);\n  const [loginMessage, setLoginMessage] = React.useState(\"\");\n\n  const { cookies } = props;\n\n  const checkName = (name: string) => {\n    const check = name.length > 3 ? true : false;\n    if (check) {\n      setNameError(\"\");\n    } else {\n      setNameError(\"Name is too short\");\n    }\n    return check;\n  };\n\n  const checkEmail = (mail: string) => {\n    const check = mail.length > 0 ? true : false;\n    if (check) {\n      setEmailError(\"\");\n    } else {\n      setEmailError(\"Email is missing\");\n    }\n    return check;\n  };\n\n  const checkPassword = (pass: string) => {\n    const check = pass.length > 6 ? true : false;\n    if (check) {\n      setPasswordError(\"\");\n    } else {\n      setPasswordError(\"Password too short\");\n    }\n    return check;\n  };\n\n  const login = (lProps: AuthObj) => {\n    const action = lProps.new ? \"create\" : \"login\";\n    const query = {\n      action: [\"user\", lProps.new ? \"create\" : action],\n      id: \"\",\n      fields: lProps.fields\n    };\n    props.checkUser(query).then((res: any) => {\n      const response = res.payload.data;\n      if (response.user === \"new\") {\n        setAuthNew(true);\n      } else if (response.status) {\n        setLoginMessage(\"\");\n        props.currentUser({\n          token: response.user.token,\n          email: response.user.email\n        });\n        props.setAuthStatus(true)\n        cookies.set(\"email\", response.user.email, { path: \"/\" });\n        cookies.set(\"token\", response.user.token, { path: \"/\" });\n        props.toggle()\n      } else {\n        setLoginMessage(response.data.message);\n      }\n    });\n  };\n\n  const handleSubmit = (event: any) => {\n    event.preventDefault();\n\n    let check;\n    if (authNew) {\n      check =\n        checkName(userName) &&\n        checkEmail(userEmail) &&\n        checkPassword(userPassword);\n    } else {\n      check = checkEmail(userEmail) && checkPassword(userPassword);\n    }\n    if (check) {\n      const authObj = {\n        new: authNew,\n        fields: {\n          name: userName,\n          email: userEmail,\n          password: userPassword\n        }\n      };\n      login(authObj);\n    }\n  };\n\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    switch (event.target.name) {\n      case \"uName\":\n        setUserName(event.target.value);\n        break;\n      case \"uPass\":\n        setUserPassword(event.target.value);\n        break;\n      default:\n        setUserEmail(event.target.value);\n        break;\n    }\n  };\n\n  const nameEnter = authNew ? (\n    <label>\n      <span className={style.label}>Name</span>\n      <input\n        type=\"text\"\n        name=\"uName\"\n        value={userName}\n        onChange={handleInputChange}\n      />\n    </label>\n  ) : null;\n\n  const formStyle = authNew ? style.loginTall : style.login;\n  const title = authNew ? \"Register new user\" : \"Login details\";\n\n  const inputErrors = (\n    <div className={style.error}>\n      {nameError ? <li>{nameError}</li> : null}\n      {emailError ? <li>{emailError}</li> : null}\n      {passwordError ? <li>{passwordError}</li> : null}\n      {loginMessage ? <li>{loginMessage}</li> : null}\n    </div>\n  );\n\n  return (\n    <section className={formStyle}>\n      <h1>{title}</h1>\n      <form onSubmit={handleSubmit}>\n        {nameEnter}\n        <label>\n          <span className={style.label}>Email</span>\n          <input\n            type=\"email\"\n            name=\"uMail\"\n            value={userEmail}\n            onChange={handleInputChange}\n          />\n        </label>\n        <label>\n          <span className={style.label}>Password</span>\n          <input\n            type=\"password\"\n            name=\"uPass\"\n            value={userPassword}\n            onChange={handleInputChange}\n          />\n        </label>\n        {inputErrors}\n        <button\n          className={style.submit}\n          aria-label={authNew ? \"Register\" : \"Login\"}\n        >\n          <input\n            type=\"button\"\n            value={authNew ? \"Register\" : \"Login\"}\n            id=\"submit_button\"\n          />\n        </button>\n      </form>\n    </section>\n  );\n};\n\nconst mapStateToProps = (state: AppState) => {\n  return {\n    user: state.user,\n    authStatus: state.authStatus\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  { checkUser, currentUser, setAuthStatus }\n)(withCookies(Login));\n","import React from \"react\";\n\nimport Login from \"./Login\";\n\nimport \"../styles/_ui.scss\";\nimport style from \"../styles/Home.module.scss\";\n\nconst Home = (props:{toggle:()=>void}) => {\n\n  const [showLogin, setShowLogin] = React.useState(false);\n\n  return (\n    <main className={style.home}>\n      <h1 className={style.title}>The Newsletter</h1>\n      <h2 className={style.subTitle}>Just information.</h2>\n      <div className={style.screenshot} />\n      <div className={style.buttonWrapper}>\n        <button\n          className=\"button\"\n          aria-label=\"Login or register\"\n          onClick={() => setShowLogin(!showLogin)}\n        >\n          Login or register\n        </button>\n      </div>\n      {showLogin ? (\n        <div className=\"modal\">\n          <Login toggle={props.toggle}/>\n        </div>\n      ) : null}\n    </main>\n  );\n};\n\nexport default Home;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"LoginForm_login__pgnVi\",\"loginTall\":\"LoginForm_loginTall__3xFXP\",\"label\":\"LoginForm_label__Exx1P\",\"submit\":\"LoginForm_submit__3_ICg\",\"error\":\"LoginForm_error__2pBlE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"Home_home__2jlRQ\",\"title\":\"Home_title__1maBB\",\"subTitle\":\"Home_subTitle__17VvD\",\"screenshot\":\"Home_screenshot__305jA\",\"buttonWrapper\":\"Home_buttonWrapper__1GPzh\"};"],"sourceRoot":""}