{"version":3,"sources":["styles/SourceEditAdd.module.scss","components/Source/SourceEdit.tsx"],"names":["module","exports","add","slideDown","buttonsWrapper","cancel","edit","submit","error","scaleUp","slideInFromTop","slideInFromLeft","growLarge","rotate","disappear","SourceEdit","props","currentSource","_id","name","url","home","source","_useState","useState","_useState2","Object","_Users_dmitry_Desktop_Projects_newsletter_single_client_ts_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","setName","_useState3","_useState4","setUrl","_useState5","_useState6","setHome","errors","closeForm","close","checkInput","regex","RegExp","field","value","test","handleInputChange","event","target","cancelButton","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","className","style","aria-label","onClick","formElements","onSubmit","preventDefault","console","log","checkName","type","newSource","oldSource","JSON","stringify","onChange","id","data-test"],"mappings":"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","file":"static/js/10.9f569b14.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"add\":\"SourceEditAdd_add__38_Hh\",\"slideDown\":\"SourceEditAdd_slideDown__345va\",\"buttonsWrapper\":\"SourceEditAdd_buttonsWrapper__2-dAQ\",\"cancel\":\"SourceEditAdd_cancel__rzETj\",\"edit\":\"SourceEditAdd_edit__2hFrs\",\"submit\":\"SourceEditAdd_submit__1kIQR\",\"error\":\"SourceEditAdd_error__EAwLA\",\"scaleUp\":\"SourceEditAdd_scaleUp__3oZ3e\",\"slideInFromTop\":\"SourceEditAdd_slideInFromTop__1814x\",\"slideInFromLeft\":\"SourceEditAdd_slideInFromLeft__21_vy\",\"growLarge\":\"SourceEditAdd_growLarge__6NFqd\",\"rotate\":\"SourceEditAdd_rotate__z5WTt\",\"disappear\":\"SourceEditAdd_disappear__2Lq0G\"};","import React, { useState } from \"react\";\n\nimport { Source } from \"../../store/source/types\";\n\nimport style from \"../../styles/SourceEditAdd.module.scss\";\n\nconst SourceEdit = (props: {\n  source?: Source;\n  submit: (arg0: Source) => any;\n  close?: () => void;\n}) => {\n\n  let currentSource = {\n    _id: \"\",\n    name: \"\",\n    url: \"\",\n    home: \"\"\n  };\n\n  if (props.source) {\n    currentSource = props.source;\n  }\n\n  const [name, setName] = useState(currentSource.name);\n  const [url, setUrl] = useState(currentSource.url);\n  const [home, setHome] = useState(currentSource.home);\n  let errors = {\n    name: \"\",\n    url: \"\",\n    home: \"\"\n  };\n\n  const closeForm = () => {\n    if (props.close) {\n      props.close();\n    }\n  };\n\n  const checkInput = (props: {\n    value: string;\n    field: string;\n    type: string;\n  }) => {\n    const regex = new RegExp(\n      \"^(http://www.|https://www.|http://|https://)?[a-z0-9]+([-.]{1}[a-z0-9]+)*.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?$\",\n      \"gm\"\n    );\n    switch (props.field) {\n      case \"name\":\n        if (props.value !== \"\") {\n          errors.name = \"\";\n          return true;\n        } else {\n          errors.name = \"Name is not provided\";\n          return false;\n        }\n      case \"url\":\n        if (props.value !== \"\") {\n          if (regex.test(props.value)) {\n            errors.url = \"\";\n            return true;\n          } else {\n            errors.url = \"The URL is wrong\";\n            return false;\n          }\n        } else {\n          errors.name = \"URL is not provided\";\n          return false;\n        }\n      default:\n        if (props.value !== \"\") {\n          if (regex.test(props.value)) {\n            errors.home = \"\";\n            return true;\n          } else {\n            errors.home = \"The homepage is wrong\";\n            return false;\n          }\n        } else {\n          errors.home = \"Homepage is not provided\";\n          return false;\n        }\n    }\n  };\n\n  const handleSubmit = (event: any) => {\n    event.preventDefault();\n    console.log(\"form clicked\");\n    const checkName =\n      checkInput({ value: name, field: \"name\", type: \"text\" }) &&\n      checkInput({ value: url, field: \"url\", type: \"url\" }) &&\n      checkInput({ value: home, field: \"home\", type: \"url\" });\n    const newSource = {\n      _id: currentSource._id ? currentSource._id : \"\",\n      name,\n      url,\n      home\n    };\n    const oldSource = {\n      _id: props.source ? props.source._id : \"\",\n      name: props.source ? props.source.name : \"\",\n      url: props.source ? props.source.url : \"\",\n      home: props.source ? props.source.home : \"\"\n    };\n    const diff = JSON.stringify(newSource) === JSON.stringify(oldSource);\n    if (!diff && checkName && newSource !== currentSource) {\n      props.submit(newSource);\n      closeForm();\n    }\n  };\n\n  const handleInputChange = (event: any) => {\n    switch (event.target.name) {\n      case \"name\":\n        setName(event.target.value);\n        break;\n      case \"url\":\n        setUrl(event.target.value);\n        break;\n      default:\n        setHome(event.target.value);\n        break;\n    }\n  };\n  const cancelButton = props.source ? null : (\n    <button className={style.cancel} aria-label='Cancel' onClick={() => closeForm()}>\n      Cancel\n    </button>\n  );\n  const formElements = (\n    <form onSubmit={handleSubmit}>\n      <label>\n        <span>Source</span>\n        <input\n          type=\"text\"\n          name=\"name\"\n          value={name}\n          onChange={handleInputChange}\n        />\n      </label>\n      <label>\n        <span>URL</span>\n        <input\n          type=\"url\"\n          name=\"url\"\n          value={url}\n          onChange={handleInputChange}\n        />\n      </label>\n      <label>\n        <span>Homepage</span>\n        <input\n          type=\"url\"\n          name=\"home\"\n          value={home}\n          onChange={handleInputChange}\n        />\n      </label>\n      {errors.name ? (\n        <div className={style.error}>- {errors.name}</div>\n      ) : null}\n      {errors.url ? <div className={style.error}>- {errors.url}</div> : null}\n      {errors.home ? (\n        <div className={style.error}>- {errors.home}</div>\n      ) : null}\n      <div className={style.buttonsWrapper}>\n        <button\n          className={style.submit}\n          aria-label={props.source ? \"Submit\" : \"Add\"}\n        >\n          <input\n            type=\"button\"\n            value={props.source ? \"Submit\" : \"Add\"}\n            id=\"submit_button\"\n          />\n        </button>\n        {cancelButton}\n      </div>\n    </form>\n  );\n  const editForm = props.source ? (\n    <section className={style.edit} data-test=\"component__source-edit\">{formElements}</section>\n  ) : (\n    <section className={style.add} data-test=\"component__source-add\">{formElements}</section>\n  );\n  return editForm;\n};\n\nexport default SourceEdit;\n"],"sourceRoot":""}