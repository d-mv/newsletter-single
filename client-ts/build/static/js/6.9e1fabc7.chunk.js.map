{"version":3,"sources":["components/Login.tsx","containers/Home/Home.tsx","styles/LoginForm.module.scss","styles/Home.module.scss"],"names":["Login","props","_React$useState","React","useState","_React$useState2","Object","slicedToArray","userName","setUserName","_React$useState3","_React$useState4","userEmail","setUserEmail","_React$useState5","_React$useState6","userPassword","setUserPassword","_React$useState7","_React$useState8","nameError","setNameError","_React$useState9","_React$useState10","emailError","setEmailError","_React$useState11","_React$useState12","passwordError","setPasswordError","checkEmail","mail","check","length","checkPassword","pass","handleInputChange","event","target","name","value","nameEnter","newUser","react_default","a","createElement","className","style","label","type","onChange","formStyle","loginTall","login","title","inputErrors","error","message","onSubmit","preventDefault","checkName","authObj","new","fields","email","password","submit","aria-label","id","connect","state","user","checkUser","authNew","setAuthNew","showLogin","setShowLogin","loginMessage","setLoginMessage","cookies","home","subTitle","screenshot","buttonWrapper","onClick","components_Login","lProps","action","query","then","res","response","payload","data","console","log","status","setUserToken","token","set","path","toggleAuth","module","exports"],"mappings":"6JAqJeA,EAhJD,SAACC,GAKT,IAAAC,EAC4BC,IAAMC,SAAS,IAD3CC,EAAAC,OAAAC,EAAA,EAAAD,CAAAJ,EAAA,GACGM,EADHH,EAAA,GACaI,EADbJ,EAAA,GAAAK,EAE8BP,IAAMC,SAAS,IAF7CO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAEGE,EAFHD,EAAA,GAEcE,EAFdF,EAAA,GAAAG,EAGoCX,IAAMC,SAAS,IAHnDW,EAAAT,OAAAC,EAAA,EAAAD,CAAAQ,EAAA,GAGGE,EAHHD,EAAA,GAGiBE,EAHjBF,EAAA,GAAAG,EAI8Bf,IAAMC,SAAS,IAJ7Ce,EAAAb,OAAAC,EAAA,EAAAD,CAAAY,EAAA,GAIGE,EAJHD,EAAA,GAIcE,EAJdF,EAAA,GAAAG,EAKgCnB,IAAMC,SAAS,IAL/CmB,EAAAjB,OAAAC,EAAA,EAAAD,CAAAgB,EAAA,GAKGE,EALHD,EAAA,GAKeE,EALfF,EAAA,GAAAG,EAMsCvB,IAAMC,SAAS,IANrDuB,EAAArB,OAAAC,EAAA,EAAAD,CAAAoB,EAAA,GAMGE,EANHD,EAAA,GAMkBE,EANlBF,EAAA,GAkBEG,EAAa,SAACC,GAClB,IAAMC,EAAQD,EAAKE,OAAS,EAM5B,OAJER,EADEO,EACY,GAEA,oBAETA,GAGHE,EAAgB,SAACC,GACrB,IAAMH,EAAQG,EAAKF,OAAS,EAM5B,OAJEJ,EADEG,EACe,GAEA,sBAEZA,GA4BHI,EAAoB,SAACC,GACzB,OAAQA,EAAMC,OAAOC,MACnB,IAAK,QACH9B,EAAY4B,EAAMC,OAAOE,OACzB,MACF,IAAK,QACHvB,EAAgBoB,EAAMC,OAAOE,OAC7B,MACF,QACE3B,EAAawB,EAAMC,OAAOE,SAK1BC,EAAYxC,EAAMyC,QACtBC,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,QAAMC,UAAWC,IAAMC,OAAvB,QACAL,EAAAC,EAAAC,cAAA,SACEI,KAAK,OACLV,KAAK,QACLC,MAAOhC,EACP0C,SAAUd,KAGZ,KACEe,EAAYlD,EAAMyC,QAAUK,IAAMK,UAAYL,IAAMM,MACpDC,EAAQrD,EAAMyC,QAAU,oBAAsB,gBAE9Ca,EACJZ,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAMS,OACnBpC,EAAYuB,EAAAC,EAAAC,cAAA,UAAKzB,GAAkB,KACnCI,EAAamB,EAAAC,EAAAC,cAAA,UAAKrB,GAAmB,KACrCI,EAAgBe,EAAAC,EAAAC,cAAA,UAAKjB,GAAsB,KAC3C3B,EAAMwD,QAAUd,EAAAC,EAAAC,cAAA,UAAK5C,EAAMwD,SAAgB,MAIhD,OACEd,EAAAC,EAAAC,cAAA,WAASC,UAAWK,GAClBR,EAAAC,EAAAC,cAAA,UAAKS,GACLX,EAAAC,EAAAC,cAAA,QAAMa,SAjEW,SAACrB,GAYpB,GAXAA,EAAMsB,iBAGF1D,EAAMyC,QAlCM,SAACH,GACjB,IAAMP,EAAQO,EAAKN,OAAS,EAM5B,OAJEZ,EADEW,EACW,GAEA,qBAERA,EA6BH4B,CAAUpD,IACVsB,EAAWlB,IACXsB,EAAclB,GAERc,EAAWlB,IAAcsB,EAAclB,GAEtC,CACT,IAAM6C,EAAU,CACdC,IAAK7D,EAAMyC,QACXqB,OAAQ,CACNxB,KAAM/B,EACNwD,MAAOpD,EACPqD,SAAUjD,IAGdf,EAAMoD,MAAMQ,MA6CTpB,EACDE,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,QAAMC,UAAWC,IAAMC,OAAvB,SACAL,EAAAC,EAAAC,cAAA,SACEI,KAAK,QACLV,KAAK,QACLC,MAAO5B,EACPsC,SAAUd,KAGdO,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,QAAMC,UAAWC,IAAMC,OAAvB,YACAL,EAAAC,EAAAC,cAAA,SACEI,KAAK,WACLV,KAAK,QACLC,MAAOxB,EACPkC,SAAUd,KAGbmB,EACDZ,EAAAC,EAAAC,cAAA,UACEC,UAAWC,IAAMmB,OACjBC,aAAYlE,EAAMyC,QAAU,WAAa,SAEzCC,EAAAC,EAAAC,cAAA,SACEI,KAAK,SACLT,MAAOvC,EAAMyC,QAAU,WAAa,QACpC0B,GAAG,6CCpCAC,sBAJS,SAACC,GAAD,MAAsB,CAC5CC,KAAMD,EAAMC,OAKZ,CAAEC,eAFWH,CApFF,SAACpE,GAAiB,IAAAC,EACCC,IAAMC,UAAS,GADhBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAJ,EAAA,GACtBuE,EADsBpE,EAAA,GACbqE,EADarE,EAAA,GAAAK,EAEKP,IAAMC,UAAS,GAFpBO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAEtBiE,EAFsBhE,EAAA,GAEXiE,EAFWjE,EAAA,GAAAG,EAGWX,IAAMC,SAAS,IAH1BW,EAAAT,OAAAC,EAAA,EAAAD,CAAAQ,EAAA,GAGtB+D,EAHsB9D,EAAA,GAGR+D,EAHQ/D,EAAA,GAIrBgE,EAAY9E,EAAZ8E,QAqDR,OACEpC,EAAAC,EAAAC,cAAA,QAAMC,UAAWC,IAAMiC,MACrBrC,EAAAC,EAAAC,cAAA,MAAIC,UAAWC,IAAMO,OAArB,kBACAX,EAAAC,EAAAC,cAAA,MAAIC,UAAWC,IAAMkC,UAArB,qBACAtC,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAMmC,aACtBvC,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAMoC,eACpBxC,EAAAC,EAAAC,cAAA,UAAQC,UAAU,SAASqB,aAAW,oBAAoBiB,QAAS,kBAAMR,GAAcD,KAAvF,sBAIDA,EACChC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACbH,EAAAC,EAAAC,cAACwC,EAAD,CACE5B,QAASoB,EACTE,QAAS9E,EAAM8E,QACf1B,MA3CI,SAACiC,GACb,IAAMC,EAASD,EAAOxB,IAAM,SAAW,QACjC0B,EAAQ,CACZD,OAAQ,CAAC,OAAQD,EAAOxB,IAAM,SAAWyB,GACzCnB,GAAI,GACJL,OAAQuB,EAAOvB,QAEjB9D,EAAMuE,UAAUgB,GAAOC,KAAK,SAACC,GAC3B,IAAMC,EAAWD,EAAIE,QAAQC,KAC7BC,QAAQC,IAAIJ,GACU,QAAlBA,EAASpB,KACXG,GAAW,GACFiB,EAASK,QAClBlB,EAAgB,IAEhB7E,EAAMY,aAAa8E,EAASpB,KAAKP,OACjC/D,EAAMgG,aAAaN,EAASpB,KAAK2B,OAEjCnB,EAAQoB,IAAI,QAASR,EAASpB,KAAKP,MAAO,CAAEoC,KAAM,MAClDrB,EAAQoB,IAAI,QAASR,EAASpB,KAAK2B,MAAO,CAAEE,KAAM,MAElDnG,EAAMoG,cAENvB,EAAgBa,EAASE,KAAKpC,YAqB1Bf,QAAS+B,KAGX,4BChGV6B,EAAAC,QAAA,CAAkBlD,MAAA,yBAAAD,UAAA,6BAAAJ,MAAA,yBAAAkB,OAAA,0BAAAV,MAAA,8CCAlB8C,EAAAC,QAAA,CAAkBvB,KAAA,mBAAA1B,MAAA,oBAAA2B,SAAA,uBAAAC,WAAA,yBAAAC,cAAA","file":"static/js/6.9e1fabc7.chunk.js","sourcesContent":["import React from \"react\";\n\n// import { LoginForm, Title, Label, Submit, Error } from \"../styles/LoginForm\";\nimport style from '../styles/LoginForm.module.scss'\n\nconst Login = (props: {\n  message: string;\n  cookies: any;\n  login: (arg0: any) => any;\n  newUser: boolean;\n}) => {\n  const [userName, setUserName] = React.useState(\"\");\n  const [userEmail, setUserEmail] = React.useState(\"\");\n  const [userPassword, setUserPassword] = React.useState(\"\");\n  const [nameError, setNameError] = React.useState(\"\");\n  const [emailError, setEmailError] = React.useState(\"\");\n  const [passwordError, setPasswordError] = React.useState(\"\");\n\n  const checkName = (name: string) => {\n    const check = name.length > 3 ? true : false;\n    if (check) {\n      setNameError(\"\");\n    } else {\n      setNameError(\"Name is too short\");\n    }\n    return check;\n  };\n\n  const checkEmail = (mail: string) => {\n    const check = mail.length > 0 ? true : false;\n    if (check) {\n      setEmailError(\"\");\n    } else {\n      setEmailError(\"Email is missing\");\n    }\n    return check;\n  };\n\n  const checkPassword = (pass: string) => {\n    const check = pass.length > 6 ? true : false;\n    if (check) {\n      setPasswordError(\"\");\n    } else {\n      setPasswordError(\"Password too short\");\n    }\n    return check;\n  };\n\n  const handleSubmit = (event: any) => {\n    event.preventDefault();\n\n    let check;\n    if (props.newUser) {\n      check =\n        checkName(userName) &&\n        checkEmail(userEmail) &&\n        checkPassword(userPassword);\n    } else {\n      check = checkEmail(userEmail) && checkPassword(userPassword);\n    }\n    if (check) {\n      const authObj = {\n        new: props.newUser,\n        fields: {\n          name: userName,\n          email: userEmail,\n          password: userPassword\n        }\n      };\n      props.login(authObj);\n    }\n  };\n\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    switch (event.target.name) {\n      case \"uName\":\n        setUserName(event.target.value);\n        break;\n      case \"uPass\":\n        setUserPassword(event.target.value);\n        break;\n      default:\n        setUserEmail(event.target.value);\n        break;\n    }\n  };\n\n  const nameEnter = props.newUser ? (\n    <label>\n      <span className={style.label}>Name</span>\n      <input\n        type=\"text\"\n        name=\"uName\"\n        value={userName}\n        onChange={handleInputChange}\n      />\n    </label>\n  ) : null;\n  const formStyle = props.newUser ? style.loginTall : style.login;\n  const title = props.newUser ? \"Register new user\" : \"Login details\";\n\n  const inputErrors = (\n    <div className={style.error}>\n      {nameError ? <li>{nameError}</li> : null}\n      {emailError ? <li>{emailError}</li> : null}\n      {passwordError ? <li>{passwordError}</li> : null}\n      {props.message ? <li>{props.message}</li> : null}\n    </div>\n  );\n\n  return (\n    <section className={formStyle}>\n      <h1>{title}</h1>\n      <form onSubmit={handleSubmit}>\n        {nameEnter}\n        <label>\n          <span className={style.label}>Email</span>\n          <input\n            type=\"email\"\n            name=\"uMail\"\n            value={userEmail}\n            onChange={handleInputChange}\n          />\n        </label>\n        <label>\n          <span className={style.label}>Password</span>\n          <input\n            type=\"password\"\n            name=\"uPass\"\n            value={userPassword}\n            onChange={handleInputChange}\n          />\n        </label>\n        {inputErrors}\n        <button\n          className={style.submit}\n          aria-label={props.newUser ? \"Register\" : \"Login\"}\n        >\n          <input\n            type=\"button\"\n            value={props.newUser ? \"Register\" : \"Login\"}\n            id=\"submit_button\"\n          />\n        </button>\n      </form>\n    </section>\n  );\n};\n\nexport default Login;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { AppState } from \"../../store\";\n\nimport { checkUser } from \"../../store/user/actions\";\nimport Login from \"../../components/Login\";\n\nimport { AuthObj } from \"../../types\";\n\nimport style from \"../../styles/Home.module.scss\";\n\nimport \"../../styles/_ui.scss\";\n\ninterface props {\n  checkUser: (arg0?: any) => any;\n  toggleAuth: () => void;\n  setUserEmail: (arg0: string) => void;\n  setUserToken: (arg0: string) => void;\n  cookies: any;\n}\n\nconst Home = (props: props) => {\n  const [authNew, setAuthNew] = React.useState(false);\n  const [showLogin, setShowLogin] = React.useState(false);\n  const [loginMessage, setLoginMessage] = React.useState(\"\");\n  const { cookies } = props;\n\n  // const cookiesCheck = (cProps: { email: string; token: string }) => {\n  //   const query = {\n  //     action: [\"user\", \"cookiesCheck\"],\n  //     fields: cProps\n  //   };\n  //   props.checkUser(query).then((res: any) => {\n  //     const response = res.payload.data;\n  //     if (response.authed) {\n  //       props.setUserEmail(cProps.email);\n  //       props.setUserToken(cProps.token);\n  //       props.toggleAuth();\n  //     }\n  //   });\n  // };\n\n  // const existingCookies = {\n  //   email: cookies.get(\"email\"),\n  //   token: cookies.get(\"token\")\n  // };\n  // if (cookies.get(\"email\") && cookies.get(\"token\")) {\n  //   cookiesCheck(existingCookies);\n  // }\n\n  const login = (lProps: AuthObj) => {\n    const action = lProps.new ? \"create\" : \"login\";\n    const query = {\n      action: [\"user\", lProps.new ? \"create\" : action],\n      id: \"\",\n      fields: lProps.fields\n    };\n    props.checkUser(query).then((res: any) => {\n      const response = res.payload.data;\n      console.log(response);\n      if (response.user === \"new\") {\n        setAuthNew(true);\n      } else if (response.status) {\n        setLoginMessage(\"\");\n\n        props.setUserEmail(response.user.email);\n        props.setUserToken(response.user.token);\n\n        cookies.set(\"email\", response.user.email, { path: \"/\" });\n        cookies.set(\"token\", response.user.token, { path: \"/\" });\n\n        props.toggleAuth();\n      } else {\n        setLoginMessage(response.data.message);\n      }\n    });\n  };\n\n  return (\n    <main className={style.home}>\n      <h1 className={style.title}>The Newsletter</h1>\n      <h2 className={style.subTitle}>Just information.</h2>\n      <div className={style.screenshot} />\n      <div className={style.buttonWrapper}>\n        <button className=\"button\" aria-label='Login or register' onClick={() => setShowLogin(!showLogin)}>\n          Login or register\n        </button>\n      </div>\n      {showLogin ? (\n        <div className=\"modal\">\n          <Login\n            message={loginMessage}\n            cookies={props.cookies}\n            login={login}\n            newUser={authNew}\n          />\n        </div>\n      ) : null}\n    </main>\n  );\n};\nconst mapStateToProps = (state: AppState) => ({\n  user: state.user\n});\n\nexport default connect(\n  mapStateToProps,\n  { checkUser }\n)(Home);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"LoginForm_login__pgnVi\",\"loginTall\":\"LoginForm_loginTall__3xFXP\",\"label\":\"LoginForm_label__Exx1P\",\"submit\":\"LoginForm_submit__3_ICg\",\"error\":\"LoginForm_error__2pBlE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"Home_home__2jlRQ\",\"title\":\"Home_title__1maBB\",\"subTitle\":\"Home_subTitle__17VvD\",\"screenshot\":\"Home_screenshot__305jA\",\"buttonWrapper\":\"Home_buttonWrapper__1GPzh\"};"],"sourceRoot":""}