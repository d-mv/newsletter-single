(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{78:function(t,e,n){"use strict";n.d(e,"a",function(){return m}),n.d(e,"e",function(){return p}),n.d(e,"c",function(){return g}),n.d(e,"f",function(){return b}),n.d(e,"d",function(){return h}),n.d(e,"b",function(){return w});var a=n(5),r=n(6),o=n(26),s=n(81);function i(){var t=Object(a.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return i=function(){return t},t}function c(){var t=Object(a.a)(["\n  display: flex;\n  font-family: ",";\n  justify-content: space-between;\n  font-size: 80%;\n  font-weight: 300;\n  padding: 0 0.3rem;\n"]);return c=function(){return t},t}function u(){var t=Object(a.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-content: center;\n  font-weight: 300;\n  font-family: ",";\n  letter-spacing: 0.03rem;\n  font-size: 0.8rem;\n  padding-top: 0.6rem;\n"]);return u=function(){return t},t}function l(){var t=Object(a.a)(["\n  font-size: 1.1rem;\n  padding: 0 0 0.3rem 0;\n  cursor: pointer;\n  margin-bottom: 5px;\n  line-height: 1.4rem;\n\n  @media (max-width: 499px) {\n    font-size: 1.3rem;\n  }\n"]);return l=function(){return t},t}function d(){var t=Object(a.a)(["\n  cursor: pointer;\n  font-weight: 500;\n  margin: 0;\n  line-height: 1.6rem;\n  font-size: 1.3rem;\n  @media (max-width: 499px) {\n    font-size: 1.5rem;\n    line-height: 1.8rem;\n  }\n"]);return d=function(){return t},t}function f(){var t=Object(a.a)(["\n  animation: 0.3s ease-out 0s 1 ",";\n\n  @media (min-width: 499px) {\n    .text {\n      max-height: 50rem;\n    }\n  }\n\n  margin: 0 auto;\n  margin-bottom: 1rem;\n  padding-bottom: 1rem;\n\n  border-bottom: 1px solid ",";\n  @media (max-width: 699px) {\n    width: 100%;\n  }\n\n  @media (min-width: 700px) and (max-width: 949px) {\n    width: 45%;\n  }\n\n  @media (min-width: 950px) and (max-width: 1199px) {\n    width: 30%;\n  }\n\n  @media (min-width: 1200px) and (max-width: 1599px) {\n    width: 23%;\n  }\n\n  @media (min-width: 1599px) and (max-width: 4000px) {\n    width: 18%;\n  }\n"]);return f=function(){return t},t}var m=r.a.article(f(),s.a,o.h),p=r.a.h3(d()),h=r.a.main(l()),g=r.a.section(u(),o.l),w=r.a.footer(c(),o.l),b=r.a.div(i())},81:function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"b",function(){return d});var a=n(5),r=n(6);function o(){var t=Object(a.a)(["\n    0% {\n            transform: translateY(-30%);\n            filter:opacity(0)\n\n    }\n    100% {\n           transform: translateY(0);\n\n    }\n    "]);return o=function(){return t},t}function s(){var t=Object(a.a)(["\n    0% {\n      transform: scale(0);\n    }\n    100% {\n      transform: scale(1);\n    }\n    "]);return s=function(){return t},t}function i(){var t=Object(a.a)(["\n    0% {\n      transform: translateX(-100%);\n    }\n    100% {\n      transform: translateY(0);\n    }\n  "]);return i=function(){return t},t}function c(){var t=Object(a.a)(["\n    0% {\n      transform: translateY(-100%);\n    }\n    100% {\n      transform: translateX(0);\n    }"]);return c=function(){return t},t}function u(){var t=Object(a.a)(["\n0% {transform:scale(0)} 100%{transform:scale(1)}\n"]);return u=function(){return t},t}var l=Object(r.b)(u()),d=(Object(r.b)(c()),Object(r.b)(i()),Object(r.b)(s()),Object(r.b)(o()))},82:function(t,e,n){"use strict";var a={1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},r={1:"Sun",2:"Mon",3:"Tue",4:"Wed",5:"Thu",6:"Fri",7:"Sat"};e.a=function(t){var e=new Date;Object.keys(t).length||(e=new Date(t));var n="".concat(e.getHours(),":").concat(e.getMinutes()," am");return e.getHours()>12&&(n="".concat(e.getHours()-12,":").concat(e.getMinutes()," pm")),"".concat(r[e.getDay()+1]," ").concat(e.getDate()," ").concat(a[e.getMonth()+1]," at ").concat(n)}},83:function(t,e,n){"use strict";var a=n(0),r=n.n(a),o=n(87),s=n(78);e.a=function(t){var e="show"===t.mode?"".concat(t.author," @ ").concat(t.source):"@".concat(t.source);return r.a.createElement(s.c,null,r.a.createElement(s.f,null,e),r.a.createElement(s.f,null,r.a.createElement(o.a,{update:t.update,id:t.id,mode:"star",status:t.star},t.buttons.star),r.a.createElement(o.a,{update:t.update,id:t.id,mode:"read",status:t.read},t.buttons.read)))}},84:function(t,e,n){"use strict";var a=n(0),r=n.n(a),o=n(82),s=n(78);e.a=function(t){var e="~".concat(t.readingTime," mins");return r.a.createElement(s.b,null,r.a.createElement(s.f,null,Object(o.a)(t.timestamp)),r.a.createElement(s.f,null,e))}},87:function(t,e,n){"use strict";var a=n(0),r=n.n(a),o=n(5),s=n(6),i=n(26);function c(){var t=Object(o.a)(["\n  transition: 0.3s;\n\n  color: ",";\n  &:hover {\n    color: ",";\n  }\n"]);return c=function(){return t},t}function u(){var t=Object(o.a)(["\n  transition: 0.3s;\n\n  color: ",";\n  &:hover {\n    color: ",";\n  }\n"]);return u=function(){return t},t}function l(){var t=Object(o.a)(["\n  cursor: pointer;\n  outline: none;\n  font-size: 1.2rem;\n  margin: 0;\n  transition: 0.3s;\n\n  @media (max-width: 599px) {\n    font-size: 1.2rem;\n  }\n"]);return l=function(){return t},t}var d=s.a.button(l()),f=s.a.span(u(),i.h,i.b),m=s.a.span(c(),i.b,i.h);e.a=function(t){var e=t.status?r.a.createElement(m,null,t.children):r.a.createElement(f,null,t.children);return r.a.createElement(d,{onClick:function(){return t.update({field:t.mode,id:t.id})}},e)}},96:function(t,e,n){"use strict";n.r(e);var a=n(88),r=n(89),o=n(92),s=n(90),i=n(93),c=n(0),u=n.n(c),l=n(14),d=n(17),f=n(9),m=n.n(f);var p=n(35);var h=n(27),g=n(5),w=n(6),b=n(26);function v(){var t=Object(g.a)(["\n  font-family: ",";\n  color: ",";\n\n  @media (max-width: 302px) {\n    font-size: 1.5rem;\n  }\n\n  @media (min-width: 303px) and (max-width: 340px) {\n    font-size: 2rem;\n  }\n\n  @media (min-width: 341px) {\n    font-size: 2.5rem;\n  }\n  font-weight: 700;\n  margin: 0;\n  height: 3rem;\n"]);return v=function(){return t},t}var x=w.a.h1(v(),b.d,b.b),E=function(){return u.a.createElement(x,null,"The Newsletter")},y=n(82);function S(){var t=Object(g.a)(["\n  color: ",";\n  font-size: 100%;\n  font-weight: normal;\n"]);return S=function(){return t},t}var O=w.a.h5(S(),b.i),j=function(t){return u.a.createElement(O,null,Object(y.a)(t.date))};function P(){var t=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  flex-wrap: wrap;\n  padding: 0;\n\n  margin: -10px 20px 20px 20px;\n  border-bottom: 1px solid ",";\n  cursor: default;\n  user-select: none;\n"]);return P=function(){return t},t}var R=w.a.header(P(),b.h),k=function(){return u.a.createElement(R,null,u.a.createElement(E,null),u.a.createElement(j,{date:new Date}))},z=n(77);function F(){var t=Object(g.a)(["\n  color: ",";\n  transition: 0.7s;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  outline: none;\n  margin: 0 5px;\n  padding: {\n    top: 3px;\n    left: 10px;\n    right: 10px;\n  }\n  font-family: ",";\n  font-size: 0.9rem;\n  letter-spacing: 1px;\n\n  &:hover {\n    color: ",";\n  }\n\n  &:active {\n    transform: scale(0.9);\n  }\n"]);return F=function(){return t},t}var T=w.a.button(F(),function(t){return t.accent?b.a:b.b},b.d,b.a),M=function(t){return u.a.createElement(T,{accent:t.accent,onClick:function(){return function(t){"BACK"===t.child||"HOME"===t.child?t.func("posts"):"SOURCES"===t.child?t.func("sources"):"profile"===t.mode?t.func("profile"):t.func()}({mode:t.mode,child:t.children,func:t.function})}},t.children)},C=n(81);function I(){var t=Object(g.a)(["\n  animation: 0.7s ease-out 0s 1 ",";\n  position: absolute;\n  left: 10vw;\n  top: 3.2rem;\n  transition: 0.7s;\n  width: 80vw;\n  height: 2rem;\n  font-family: ",";\n  font-weight: 300;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-transform: uppercase;\n  user-select: none;\n\n  @media (max-width: 435px) {\n    top: 4.5rem;\n    width: 100vw;\n    left: 0;\n  }\n"]);return I=function(){return t},t}var D=w.a.nav(I(),C.b,b.d),U=function(t){return u.a.createElement(M,{accent:t.accent,mode:t.mode,function:t.function},t.element)},A=function(t){var e=U({element:"post"===t.mode?"BACK":"HOME",mode:"home",accent:!1,function:t.moduleToggle}),n=U({element:"SOURCES",mode:"sources",accent:!1,function:t.moduleToggle}),a="post"===t.mode?null:U({element:t.read?u.a.createElement(z.d,null):u.a.createElement(z.e,null),mode:"showRead",accent:t.read,function:t.toggleRead}),r="post"===t.mode?null:U({element:u.a.createElement(z.g,null),mode:"refresh",accent:!1,function:t.refresh}),o="post"===t.mode?null:U({element:u.a.createElement(z.f,null),mode:"filter",accent:t.showFilter,function:t.toggleFilter}),s=U({element:u.a.createElement(z.i,null),mode:"profile",accent:!1,function:t.moduleToggle});return u.a.createElement(D,null,e,n,a,o,r,s)},q=n(21),_=n(85),H=n(83),J=n(84),Y=n(78),B=function(t){var e="".concat(t.post.text.replace(/<(?:.|\n)*?>/gm," "),"..."),n=t.post.star?u.a.createElement(_.a,null):u.a.createElement(_.b,null),a=t.post.read?u.a.createElement(z.b,null):u.a.createElement(z.a,null);return u.a.createElement(Y.a,null,u.a.createElement(Y.e,{onClick:function(){t.select({id:t.post._id})}},t.post.title),u.a.createElement(H.a,{mode:"card",source:t.post.source,author:t.post.author,buttons:{star:n,read:a},read:t.post.read,star:t.post.star,update:t.update,id:t.post._id}),u.a.createElement(Y.d,{onClick:function(){t.select({id:t.post._id})}},e),u.a.createElement(J.a,{timestamp:t.post.published,readingTime:t.post.readTime}))},K=n(22),N=function(t){return u.a.createElement(K.b,null,t.posts.map(function(e){var n=function(t){return u.a.createElement(B,{key:t.post._id,post:t.post,update:t.update,select:t.select})}({post:e,update:t.update,select:t.selectPost});return function(t){return t.filter?t.show?t.pSource===t.filter:t.pRead===t.show&&t.pSource===t.filter:!!t.show||t.pRead===t.show}({show:t.showRead,filter:t.filter,pRead:e.read,pSource:e.sourceId})?n:null}))},W=n(28),X=u.a.lazy(function(){return n.e(7).then(n.bind(null,94))}),G=u.a.lazy(function(){return n.e(5).then(n.bind(null,99))}),L=u.a.lazy(function(){return n.e(9).then(n.bind(null,97))}),Q=u.a.lazy(function(){return n.e(8).then(n.bind(null,95))}),V={_id:"",source:"",sourceId:"",title:"",url:"",author:"",published:new Date,parsed:new Date,text:"",readTime:0,pages:0,read:!1,star:!1},Z=function(t){function e(){var t,n;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(n=Object(o.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(i)))).state={loading:!0,module:"posts",showRead:!1,showFilter:!1,filterId:"",sources:[],posts:[],message:"",showPost:V},n.loadPosts=function(t){n.props.loadPosts(t).then(function(t){t.payload.data.message?n.setState({posts:[],message:t.payload.data.message,loading:!1}):n.setState({posts:t.payload.data,loading:!1})})},n.loadSources=function(t){n.props.loadSources(t).then(function(t){t.payload.data.message?n.setState({sources:[],message:t.payload.data.message,loading:!1}):n.setState({sources:t.payload.data,loading:!1})})},n.fetchPostsSources=function(){var t={token:n.props.currentUser.token,action:["post","fetch"]},e={token:n.props.currentUser.token,action:["source","fetch"]};n.loadPosts(t),n.loadSources(e)},n.showModule=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"posts";console.log("show module - "+t),n.setState({module:t})},n.toggleShowRead=function(){n.setState({showRead:!n.state.showRead})},n.toggleShowFilter=function(){n.setState({showFilter:!n.state.showFilter})},n.chooseFilter=function(t){n.toggleShowFilter(),"clear"===t?n.setState({filterId:""}):n.setState({filterId:t})},n.handleRefreshClick=function(){var t={action:["post","refresh"],fields:n.props.currentUser};n.props.apiRequest(t).then(function(t){t.payload.data.authed})},n.selectPostToShow=function(t){var e={action:["post","show"],id:t.id,fields:n.props.currentUser};n.props.apiRequest(e).then(function(t){var e=t.payload.data;e.authed&&(n.showModule("post"),n.setState({showPost:e.post}))})},n.updateStatePosts=function(t){var e,a=n.state.posts;return a.filter(function(e){return e._id===t.id}).forEach(function(n){"read"===t.field?(e=n.read,n.read=!n.read):(e=n.star,n.star=!n.star)}),n.setState({posts:a}),e},n.updatePostAction=function(t){var e=n.updateStatePosts({id:t.id,field:t.field}),a={};a["".concat(t.field)]=!e;var r={action:["post","update"],id:t.id,fields:a};n.props.updatePost(r).then(function(t){n.setState({message:t.statusText})})},n}return Object(i.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){this.fetchPostsSources(),this.refresher=setInterval(this.fetchPostsSources,1e4),window.scrollTo(0,0)}},{key:"componentWillUnmount",value:function(){clearInterval(this.refresher)}},{key:"render",value:function(){var t,e=u.a.createElement(A,{read:this.state.showRead,toggleRead:this.toggleShowRead,refresh:this.handleRefreshClick,moduleToggle:this.showModule,mode:this.state.module,showFilter:""!==this.state.filterId,toggleFilter:this.toggleShowFilter}),n=this.state.showFilter&&this.state.sources?u.a.createElement(c.Suspense,{fallback:u.a.createElement(q.a,null)},u.a.createElement(X,{toggle:this.toggleShowFilter,list:this.state.sources,choose:this.chooseFilter,id:this.state.filterId})):null;this.state.message||(t=this.state.loading?u.a.createElement(q.a,null):u.a.createElement(N,{showRead:this.state.showRead,posts:this.state.posts,selectPost:this.selectPostToShow,update:this.updatePostAction,filter:this.state.filterId}));var a=u.a.createElement(c.Suspense,{fallback:u.a.createElement(q.a,null)},u.a.createElement(G,{post:this.state.showPost,update:this.updatePostAction})),r=u.a.createElement(c.Suspense,{fallback:u.a.createElement(q.a,null)},u.a.createElement(L,{sources:this.state.sources})),o=u.a.createElement(c.Suspense,{fallback:u.a.createElement(q.a,null)},u.a.createElement(Q,{currentUser:this.props.currentUser,signOff:this.props.signOff}));return u.a.createElement(W.a,{"data-test":"app"},u.a.createElement(k,null),e,n,"posts"===this.state.module?t:null,"post"===this.state.module?a:null,"sources"===this.state.module?r:null,"profile"===this.state.module?o:null)}}]),e}(u.a.Component);e.default=Object(l.b)(function(t){return{user:t.user}},{loadPosts:function(t){var e=m.a.post("/",{query:t}).then(function(t){return t}).catch(function(t){return t});return{type:d.b,payload:e}},updatePost:function(t){var e=m.a.post("/",{query:t}).then(function(t){return t}).catch(function(t){return t});return{type:d.c,payload:e}},selectPost:function(t){var e=m.a.get("/post/".concat(t)).then(function(t){return t}).catch(function(t){return t});return{type:d.a,payload:e}},loadSources:function(t){var e=m.a.post("/",{query:t}).then(function(t){return t}).catch(function(t){return t});return{type:p.a,payload:e}},apiRequest:h.a})(Z)}}]);
//# sourceMappingURL=4.24761ac4.chunk.js.map